




<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Source tree organization &mdash; CLIP OS 5.0.0_alpha1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/colors.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="How to contribute" href="contribute.html" />
    <link rel="prev" title="Building" href="build.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> CLIP OS
          

          
            
            <img src="../_static/clipos_logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                5.0 (Alpha)
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">CLIP OS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../clipos/architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../clipos/security.html">Security objectives</a></li>
<li class="toctree-l1"><a class="reference internal" href="../clipos/kernel.html">Kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../clipos/secure_boot.html">Secure Boot support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../clipos/roadmap.html">Roadmap</a></li>
</ul>
<p class="caption"><span class="caption-text">Development environment</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="setup.html">Environment setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="build.html">Building</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Source tree organization</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id1"><code class="docutils literal notranslate"><span class="pre">.repo/</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#assets"><code class="docutils literal notranslate"><span class="pre">assets/</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#assets-crates-io"><code class="docutils literal notranslate"><span class="pre">assets/crates-io/</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#assets-debian"><code class="docutils literal notranslate"><span class="pre">assets/debian/</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#assets-distfiles"><code class="docutils literal notranslate"><span class="pre">assets/distfiles/</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#assets-gentoo"><code class="docutils literal notranslate"><span class="pre">assets/gentoo/</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#assets-toolkit"><code class="docutils literal notranslate"><span class="pre">assets/toolkit/</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#cache"><code class="docutils literal notranslate"><span class="pre">cache/</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#cache-product-version-recipe-binpkgs"><code class="docutils literal notranslate"><span class="pre">cache/&lt;product&gt;/&lt;version&gt;/&lt;recipe&gt;/binpkgs/</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#manifest"><code class="docutils literal notranslate"><span class="pre">manifest/</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#out"><code class="docutils literal notranslate"><span class="pre">out/</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#out-product-version-recipe"><code class="docutils literal notranslate"><span class="pre">out/&lt;product&gt;/&lt;version&gt;/&lt;recipe&gt;/</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#out-product-version-recipe-bundle"><code class="docutils literal notranslate"><span class="pre">out/&lt;product&gt;/&lt;version&gt;/&lt;recipe&gt;/bundle/</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#products"><code class="docutils literal notranslate"><span class="pre">products/</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#products-clipos"><code class="docutils literal notranslate"><span class="pre">products/clipos/</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#products-clipos-doc"><code class="docutils literal notranslate"><span class="pre">products/clipos/doc/</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#products-clipos-sdk"><code class="docutils literal notranslate"><span class="pre">products/clipos/sdk/</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#products-clipos-core"><code class="docutils literal notranslate"><span class="pre">products/clipos/core/</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#products-clipos-efiboot"><code class="docutils literal notranslate"><span class="pre">products/clipos/efiboot/</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#run"><code class="docutils literal notranslate"><span class="pre">run/</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#src"><code class="docutils literal notranslate"><span class="pre">src/</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#src-external"><code class="docutils literal notranslate"><span class="pre">src/external/</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#src-external-linux"><code class="docutils literal notranslate"><span class="pre">src/external/linux/</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#src-external-systemd"><code class="docutils literal notranslate"><span class="pre">src/external/systemd/</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#src-platform"><code class="docutils literal notranslate"><span class="pre">src/platform/</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#src-portage"><code class="docutils literal notranslate"><span class="pre">src/portage/</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#src-portage-gentoo"><code class="docutils literal notranslate"><span class="pre">src/portage/gentoo/</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#src-portage-clipos"><code class="docutils literal notranslate"><span class="pre">src/portage/clipos/</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#toolkit"><code class="docutils literal notranslate"><span class="pre">toolkit/</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#tookit-cosmk"><code class="docutils literal notranslate"><span class="pre">tookit/cosmk/</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#tookit-doc"><code class="docutils literal notranslate"><span class="pre">tookit/doc/</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#tookit-docroot"><code class="docutils literal notranslate"><span class="pre">tookit/docroot/</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#tookit-qa"><code class="docutils literal notranslate"><span class="pre">tookit/qa/</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#tookit-repo-scripts"><code class="docutils literal notranslate"><span class="pre">tookit/repo-scripts/</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#tookit-scripts"><code class="docutils literal notranslate"><span class="pre">tookit/scripts/</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#justfile"><code class="docutils literal notranslate"><span class="pre">justfile</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#license"><code class="docutils literal notranslate"><span class="pre">LICENSE</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#readme-first"><code class="docutils literal notranslate"><span class="pre">README-FIRST</span></code></a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Contributing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contribute.html">How to contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="derive.html">How to derive this project</a></li>
</ul>
<p class="caption"><span class="caption-text">API &amp; Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cosmk.html"><code class="docutils literal notranslate"><span class="pre">cosmk</span></code> Python API reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">CLIP OS</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Source tree organization</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/toolkit/source-tree.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="source-tree-organization">
<h1>Source tree organization<a class="headerlink" href="#source-tree-organization" title="Permalink to this headline">¶</a></h1>
<p>This page is intended to give you a quick look of the overall organization of
the CLIP OS source tree as managed by the <a class="reference external" href="https://source.android.com/setup/using-repo">repo</a> tool.</p>
<div class="sidebar">
<p class="first sidebar-title">Non-exhaustive representation of the source tree</p>
<p class="last">This document has a structure that reflects the CLIP OS source tree but is
not intended to be exhaustive. Some directories and files are intentionally
missing as they do not matter to understand the organizational logic of the
CLIP OS source tree.</p>
</div>
<div class="contents local topic" id="source-tree-contents">
<p class="topic-title first">Source tree contents</p>
<ul class="simple">
<li><a class="reference internal" href="#id1" id="id3"><code class="docutils literal notranslate"><span class="pre">.repo/</span></code></a></li>
<li><a class="reference internal" href="#assets" id="id4"><code class="docutils literal notranslate"><span class="pre">assets/</span></code></a><ul>
<li><a class="reference internal" href="#assets-crates-io" id="id5"><code class="docutils literal notranslate"><span class="pre">assets/crates-io/</span></code></a></li>
<li><a class="reference internal" href="#assets-debian" id="id6"><code class="docutils literal notranslate"><span class="pre">assets/debian/</span></code></a></li>
<li><a class="reference internal" href="#assets-distfiles" id="id7"><code class="docutils literal notranslate"><span class="pre">assets/distfiles/</span></code></a></li>
<li><a class="reference internal" href="#assets-gentoo" id="id8"><code class="docutils literal notranslate"><span class="pre">assets/gentoo/</span></code></a></li>
<li><a class="reference internal" href="#assets-toolkit" id="id9"><code class="docutils literal notranslate"><span class="pre">assets/toolkit/</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#cache" id="id10"><code class="docutils literal notranslate"><span class="pre">cache/</span></code></a><ul>
<li><a class="reference internal" href="#cache-product-version-recipe-binpkgs" id="id11"><code class="docutils literal notranslate"><span class="pre">cache/&lt;product&gt;/&lt;version&gt;/&lt;recipe&gt;/binpkgs/</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#manifest" id="id12"><code class="docutils literal notranslate"><span class="pre">manifest/</span></code></a></li>
<li><a class="reference internal" href="#out" id="id13"><code class="docutils literal notranslate"><span class="pre">out/</span></code></a><ul>
<li><a class="reference internal" href="#out-product-version-recipe" id="id14"><code class="docutils literal notranslate"><span class="pre">out/&lt;product&gt;/&lt;version&gt;/&lt;recipe&gt;/</span></code></a><ul>
<li><a class="reference internal" href="#out-product-version-recipe-bundle" id="id15"><code class="docutils literal notranslate"><span class="pre">out/&lt;product&gt;/&lt;version&gt;/&lt;recipe&gt;/bundle/</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#products" id="id16"><code class="docutils literal notranslate"><span class="pre">products/</span></code></a><ul>
<li><a class="reference internal" href="#products-clipos" id="id17"><code class="docutils literal notranslate"><span class="pre">products/clipos/</span></code></a><ul>
<li><a class="reference internal" href="#products-clipos-doc" id="id18"><code class="docutils literal notranslate"><span class="pre">products/clipos/doc/</span></code></a></li>
<li><a class="reference internal" href="#products-clipos-sdk" id="id19"><code class="docutils literal notranslate"><span class="pre">products/clipos/sdk/</span></code></a></li>
<li><a class="reference internal" href="#products-clipos-core" id="id20"><code class="docutils literal notranslate"><span class="pre">products/clipos/core/</span></code></a></li>
<li><a class="reference internal" href="#products-clipos-efiboot" id="id21"><code class="docutils literal notranslate"><span class="pre">products/clipos/efiboot/</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#run" id="id22"><code class="docutils literal notranslate"><span class="pre">run/</span></code></a></li>
<li><a class="reference internal" href="#src" id="id23"><code class="docutils literal notranslate"><span class="pre">src/</span></code></a><ul>
<li><a class="reference internal" href="#src-external" id="id24"><code class="docutils literal notranslate"><span class="pre">src/external/</span></code></a><ul>
<li><a class="reference internal" href="#src-external-linux" id="id25"><code class="docutils literal notranslate"><span class="pre">src/external/linux/</span></code></a></li>
<li><a class="reference internal" href="#src-external-systemd" id="id26"><code class="docutils literal notranslate"><span class="pre">src/external/systemd/</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#src-platform" id="id27"><code class="docutils literal notranslate"><span class="pre">src/platform/</span></code></a></li>
<li><a class="reference internal" href="#src-portage" id="id28"><code class="docutils literal notranslate"><span class="pre">src/portage/</span></code></a><ul>
<li><a class="reference internal" href="#src-portage-gentoo" id="id29"><code class="docutils literal notranslate"><span class="pre">src/portage/gentoo/</span></code></a></li>
<li><a class="reference internal" href="#src-portage-clipos" id="id30"><code class="docutils literal notranslate"><span class="pre">src/portage/clipos/</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#toolkit" id="id31"><code class="docutils literal notranslate"><span class="pre">toolkit/</span></code></a><ul>
<li><a class="reference internal" href="#tookit-cosmk" id="id32"><code class="docutils literal notranslate"><span class="pre">tookit/cosmk/</span></code></a></li>
<li><a class="reference internal" href="#tookit-doc" id="id33"><code class="docutils literal notranslate"><span class="pre">tookit/doc/</span></code></a></li>
<li><a class="reference internal" href="#tookit-docroot" id="id34"><code class="docutils literal notranslate"><span class="pre">tookit/docroot/</span></code></a></li>
<li><a class="reference internal" href="#tookit-qa" id="id35"><code class="docutils literal notranslate"><span class="pre">tookit/qa/</span></code></a></li>
<li><a class="reference internal" href="#tookit-repo-scripts" id="id36"><code class="docutils literal notranslate"><span class="pre">tookit/repo-scripts/</span></code></a></li>
<li><a class="reference internal" href="#tookit-scripts" id="id37"><code class="docutils literal notranslate"><span class="pre">tookit/scripts/</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#justfile" id="id38"><code class="docutils literal notranslate"><span class="pre">justfile</span></code></a></li>
<li><a class="reference internal" href="#license" id="id39"><code class="docutils literal notranslate"><span class="pre">LICENSE</span></code></a></li>
<li><a class="reference internal" href="#readme-first" id="id40"><code class="docutils literal notranslate"><span class="pre">README-FIRST</span></code></a></li>
</ul>
</div>
<div class="note admonition">
<p class="first admonition-title">About the nomenclature of the underlying Git repositories</p>
<p>The Git repositories behind each sub-directory of the CLIP OS source tree
have a specific nomenclature intended to reflect the location of the Git
repository “check-out” in the CLIP OS source tree.</p>
<p>However, due to a limitation of GitHub-hosted repositories, we could not use
forward slashes (<code class="docutils literal notranslate"><span class="pre">/</span></code>) in the Git repository names. Folder separators are
therefore representated by underscores (<code class="docutils literal notranslate"><span class="pre">_</span></code>) in those repository names. If
a sub-directory path already contains an underscore character, (e.g., for a
third-party project under <code class="docutils literal notranslate"><span class="pre">src/external/</span></code>), then the underlying Git
repository name should have the problematic underscores stripped.</p>
<table border="1" class="last docutils" id="id2">
<caption><span class="caption-number">Table 1 </span><span class="caption-text">Example of Git nomenclature</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Sub-directory path</th>
<th class="head">Underlying Git repository name</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">manifest/</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">manifest</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">products/clipos/</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">products_clipos</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">src/external/super_tool-linux/</span></code> <em>(hypothetical)</em></td>
<td><code class="docutils literal notranslate"><span class="pre">src_external_supertool-linux</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id1">
<h2><a class="toc-backref" href="#id3"><code class="docutils literal notranslate"><span class="pre">.repo/</span></code></a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">.repo</span></code> directory holds the internal objects and files of the <em>repo</em>
tool.</p>
<div class="warning admonition">
<p class="first admonition-title">Do not mess with the contents of this directory</p>
<p class="last">This <code class="docutils literal notranslate"><span class="pre">.repo</span></code> directory should not be messed with as it holds all the
<code class="docutils literal notranslate"><span class="pre">.git</span></code> directories (i.e., the internal Git working directories) of all the
sub-projects of this source tree managed by <em>repo</em>.</p>
</div>
</div>
<div class="section" id="assets">
<h2><a class="toc-backref" href="#id4"><code class="docutils literal notranslate"><span class="pre">assets/</span></code></a><a class="headerlink" href="#assets" title="Permalink to this headline">¶</a></h2>
<p>The sub-directories of this folder enclose all kinds of binaries or archive
files that are required either to build CLIP OS or to make the CLIP OS toolkit
work on a development environment that meets the <a class="reference internal" href="setup.html#setup"><span class="std std-ref">minimal environment
requirements</span></a>.</p>
<p>Providing those assets in the source tree also allows the usage of the CLIP OS
toolkit on an offline development setup (e.g., a build environment in a
security constrained infrastructure) and thus the lack of dependency on any
remote resource.</p>
<div class="warning admonition">
<p class="first admonition-title">Git LFS-backed repositories</p>
<p class="last">As most of the underlying directories store large (and often binary) files,
most of them rely on Git LFS for the revision of those large files to avoid
cluttering their Git repository internal objects.</p>
</div>
<div class="section" id="assets-crates-io">
<h3><a class="toc-backref" href="#id5"><code class="docutils literal notranslate"><span class="pre">assets/crates-io/</span></code></a><a class="headerlink" href="#assets-crates-io" title="Permalink to this headline">¶</a></h3>
<p>This directory holds Rust crates from <a class="reference external" href="https://crates.io/">crates.io</a> that
serve to bootstrap and compile <code class="docutils literal notranslate"><span class="pre">just</span></code> (handy CLI tool to launch and abstract
sequences of shell commands).</p>
</div>
<div class="section" id="assets-debian">
<h3><a class="toc-backref" href="#id6"><code class="docutils literal notranslate"><span class="pre">assets/debian/</span></code></a><a class="headerlink" href="#assets-debian" title="Permalink to this headline">¶</a></h3>
<p>This directory holds all the Debian packages used by the alternative SDK based
on a Debian environment.</p>
</div>
<div class="section" id="assets-distfiles">
<h3><a class="toc-backref" href="#id7"><code class="docutils literal notranslate"><span class="pre">assets/distfiles/</span></code></a><a class="headerlink" href="#assets-distfiles" title="Permalink to this headline">¶</a></h3>
<p>This directory holds the <em>distfiles</em> from Gentoo which serve for the Gentoo
<strong>ebuild</strong> files.</p>
</div>
<div class="section" id="assets-gentoo">
<h3><a class="toc-backref" href="#id8"><code class="docutils literal notranslate"><span class="pre">assets/gentoo/</span></code></a><a class="headerlink" href="#assets-gentoo" title="Permalink to this headline">¶</a></h3>
<p>This directory contains the Gentoo <em>stage3</em> image that serves to bootstrap the
CLIP OS SDK.</p>
</div>
<div class="section" id="assets-toolkit">
<h3><a class="toc-backref" href="#id9"><code class="docutils literal notranslate"><span class="pre">assets/toolkit/</span></code></a><a class="headerlink" href="#assets-toolkit" title="Permalink to this headline">¶</a></h3>
<p>This directory holds all the Python packages that are dependencies of the CLIP
OS toolkit and need to be installed in the CLIP OS toolkit <em>virtualenv</em>.</p>
<p>These Python packages are originating from <a class="reference external" href="https://pypi.org/">PyPI</a> and must
only be source packages (in opposition with <a class="reference external" href="https://www.python.org/dev/peps/pep-0427/">wheel packages</a>) for legal and platform
compatibility reasons.</p>
</div>
</div>
<div class="section" id="cache">
<h2><a class="toc-backref" href="#id10"><code class="docutils literal notranslate"><span class="pre">cache/</span></code></a><a class="headerlink" href="#cache" title="Permalink to this headline">¶</a></h2>
<p>This directory encloses all the build by-products that are not required to
build CLIP OS from scratch. This directory and its contents can be safely
erased from a building machine. In this case, the toolkit will then build
entirely from scratch.</p>
<p>The subdirectories in this folder will reflect the
<code class="docutils literal notranslate"><span class="pre">out/&lt;product&gt;/&lt;version&gt;/&lt;recipe&gt;/</span></code> tree.</p>
<div class="section" id="cache-product-version-recipe-binpkgs">
<h3><a class="toc-backref" href="#id11"><code class="docutils literal notranslate"><span class="pre">cache/&lt;product&gt;/&lt;version&gt;/&lt;recipe&gt;/binpkgs/</span></code></a><a class="headerlink" href="#cache-product-version-recipe-binpkgs" title="Permalink to this headline">¶</a></h3>
<p>The binary packages produced by Portage/emerge during each <em>build</em> step and
that serve to build the target root images populated only with
runtime-dependencies (since the only way to deploy Portage packages without any
build-dependency is to emerge them only from binary packages, otherwise emerge
may need to emerge build-dependencies that may not be required or wanted in the
target root).</p>
<p>Another purpose of this directory is to provide emerge with a complete set of
the packages already compiled to speed up builds and image construction by
avoiding pointless identical package rebuilds (<code class="docutils literal notranslate"><span class="pre">emerge</span></code> is configured to
properly manage the comparison between the compilation settings, the USE flag
sets of the binary packages and the packages to be deployed in a specified
target root and will trigger a rebuild if those do not match). Usually, on
developers workstations, the contents of this directory are meant to be
populated with the binary packages archive set produced by the continuous
integration server during the nightly build. This will prevent annoying and
time-consuming package builds on the developers’ machines.</p>
</div>
</div>
<div class="section" id="manifest">
<h2><a class="toc-backref" href="#id12"><code class="docutils literal notranslate"><span class="pre">manifest/</span></code></a><a class="headerlink" href="#manifest" title="Permalink to this headline">¶</a></h2>
<p>This directory encloses all the repo manifest files in charge of constructing
the whole CLIP OS source tree.</p>
<div class="warning admonition">
<p class="first admonition-title">This is not the manifest check-out directory on which <em>repo</em> is
             working on.</p>
<p><em>repo</em> does not work with the manifest files present in that specific
directory but in the manifest files checked out in its internal directory
(<code class="docutils literal notranslate"><span class="pre">.repo/manifests/</span></code>). Do not expect <em>repo</em> to take into account the
changes you can introduce in that directory.</p>
<p class="last">The rationale behind this repository check-out is to serve only as a working
directory for the developer to bring changes (before committing them) in the
manifests files since it seems to be a bad practise to modify directly the
manifests on which <code class="docutils literal notranslate"><span class="pre">repo</span></code> operates in <code class="docutils literal notranslate"><span class="pre">.repo/manifests/</span></code>. This
<code class="docutils literal notranslate"><span class="pre">manifest/</span></code> directory serves also as a working directory for the
<code class="docutils literal notranslate"><span class="pre">cosmk</span> <span class="pre">snapshot</span></code> feature.</p>
</div>
</div>
<div class="section" id="out">
<h2><a class="toc-backref" href="#id13"><code class="docutils literal notranslate"><span class="pre">out/</span></code></a><a class="headerlink" href="#out" title="Permalink to this headline">¶</a></h2>
<p>This directory encloses all the build results from commands run by the
toolkit.</p>
<div class="warning admonition">
<p class="first admonition-title">Watch out to the mount options of your current partition</p>
<p class="last">Implementation detail: since the rootfs of the CLIP OS jails and targets are
built within this directory, it must not be located on a filesystem mount
point with options restricting filesystem features such as the creation of
device nodes or the usage of executable files. In other words, options such
as <code class="docutils literal notranslate"><span class="pre">nodev</span></code>, <code class="docutils literal notranslate"><span class="pre">noexec</span></code> or <code class="docutils literal notranslate"><span class="pre">nosuid</span></code> <strong>MUST NOT</strong> be set on the underlying
mount point of this directory.</p>
</div>
<p>The sub-directories in this folder will reflect the <code class="docutils literal notranslate"><span class="pre">&lt;product&gt;/&lt;recipe&gt;/</span></code>
tree with separation with the version number.</p>
<div class="section" id="out-product-version-recipe">
<h3><a class="toc-backref" href="#id14"><code class="docutils literal notranslate"><span class="pre">out/&lt;product&gt;/&lt;version&gt;/&lt;recipe&gt;/</span></code></a><a class="headerlink" href="#out-product-version-recipe" title="Permalink to this headline">¶</a></h3>
<p>The output results for a given <code class="docutils literal notranslate"><span class="pre">&lt;recipe&gt;</span></code> of a specific <code class="docutils literal notranslate"><span class="pre">&lt;product&gt;</span></code> at
version <code class="docutils literal notranslate"><span class="pre">&lt;version&gt;</span></code>.</p>
<div class="tip admonition">
<p class="first admonition-title">About the subdirectory <code class="docutils literal notranslate"><span class="pre">root/</span></code> below directories for the
             <em>build</em>, <em>image</em> and <em>configure</em> recipe actions</p>
<p>A specific <code class="docutils literal notranslate"><span class="pre">root</span></code> directory can be found under the directories dedicated
to the <em>build</em>, <em>image</em> and <em>configure</em> recipe actions. This <code class="docutils literal notranslate"><span class="pre">root</span></code>
directory is the location where the respective recipe actions are working to
build the rootfs.</p>
<p class="last">You need to be careful not to change any file or folder (including modes or
ownerships) under that directory because those changes may end up in the
final built image for the corresponding recipe. It might not be a good idea
to apply changes directly in these <code class="docutils literal notranslate"><span class="pre">root</span></code> directories except for
experimenting tweaks while debugging.</p>
</div>
<div class="section" id="out-product-version-recipe-bundle">
<h4><a class="toc-backref" href="#id15"><code class="docutils literal notranslate"><span class="pre">out/&lt;product&gt;/&lt;version&gt;/&lt;recipe&gt;/bundle/</span></code></a><a class="headerlink" href="#out-product-version-recipe-bundle" title="Permalink to this headline">¶</a></h4>
<p>The output result of the <code class="docutils literal notranslate"><span class="pre">&lt;recipe&gt;</span></code> recipe form <code class="docutils literal notranslate"><span class="pre">&lt;product&gt;</span></code> version
<code class="docutils literal notranslate"><span class="pre">&lt;version&gt;</span></code> product. <em>Bundle</em> recipe action is often the last recipe action
and the only one to produce the tangible products (<em>e.g.</em> disk images, EFI
binary) rather than a complete rootfs directory.</p>
</div>
</div>
</div>
<div class="section" id="products">
<h2><a class="toc-backref" href="#id16"><code class="docutils literal notranslate"><span class="pre">products/</span></code></a><a class="headerlink" href="#products" title="Permalink to this headline">¶</a></h2>
<p>This directory holds the project main build and configuration steps in the
<code class="docutils literal notranslate"><span class="pre">clipos</span></code> subfolder.</p>
<p>Each downstream project based on CLIP OS must create a directory here and
mirror part of the CLIP OS directory hierarchy.</p>
<div class="tip admonition">
<p class="first admonition-title">How to add a custom product?</p>
<p class="last">Instructions on how to derive this project for your specific use case are
available in the <a class="reference internal" href="derive.html#derive"><span class="std std-ref">How to derive this project</span></a> guide.</p>
</div>
<div class="section" id="products-clipos">
<h3><a class="toc-backref" href="#id17"><code class="docutils literal notranslate"><span class="pre">products/clipos/</span></code></a><a class="headerlink" href="#products-clipos" title="Permalink to this headline">¶</a></h3>
<p>The recipes files in charge of spawning SDK containers making use of the
scripts below to build the sub-parts of CLIP OS and bundling them together in a
final image or set of installable images.</p>
<div class="section" id="products-clipos-doc">
<h4><a class="toc-backref" href="#id18"><code class="docutils literal notranslate"><span class="pre">products/clipos/doc/</span></code></a><a class="headerlink" href="#products-clipos-doc" title="Permalink to this headline">¶</a></h4>
<p>This directory encloses all the documentation related to the CLIP OS project
(i.e., CLIP OS toolkit excluded).</p>
</div>
<div class="section" id="products-clipos-sdk">
<h4><a class="toc-backref" href="#id19"><code class="docutils literal notranslate"><span class="pre">products/clipos/sdk/</span></code></a><a class="headerlink" href="#products-clipos-sdk" title="Permalink to this headline">¶</a></h4>
<p>The recipe describing the CLIP OS SDK used by all CLIP OS recipes.</p>
</div>
<div class="section" id="products-clipos-core">
<h4><a class="toc-backref" href="#id20"><code class="docutils literal notranslate"><span class="pre">products/clipos/core/</span></code></a><a class="headerlink" href="#products-clipos-core" title="Permalink to this headline">¶</a></h4>
<p>The recipe describing the CLIP OS <em>core</em> root filesystem.</p>
</div>
<div class="section" id="products-clipos-efiboot">
<h4><a class="toc-backref" href="#id21"><code class="docutils literal notranslate"><span class="pre">products/clipos/efiboot/</span></code></a><a class="headerlink" href="#products-clipos-efiboot" title="Permalink to this headline">¶</a></h4>
<p>The recipe describing the CLIP OS <em>EFI boot</em> items.</p>
</div>
</div>
</div>
<div class="section" id="run">
<h2><a class="toc-backref" href="#id22"><code class="docutils literal notranslate"><span class="pre">run/</span></code></a><a class="headerlink" href="#run" title="Permalink to this headline">¶</a></h2>
<p>Runtime working directory for the <code class="docutils literal notranslate"><span class="pre">cosmk</span></code> toolkit and Python virtual
environment.</p>
</div>
<div class="section" id="src">
<h2><a class="toc-backref" href="#id23"><code class="docutils literal notranslate"><span class="pre">src/</span></code></a><a class="headerlink" href="#src" title="Permalink to this headline">¶</a></h2>
<p>Anything under this directory is source code of third-party or in-house
projects.</p>
<div class="section" id="src-external">
<h3><a class="toc-backref" href="#id24"><code class="docutils literal notranslate"><span class="pre">src/external/</span></code></a><a class="headerlink" href="#src-external" title="Permalink to this headline">¶</a></h3>
<p>This directory encloses all the repositories of external upstream sources that
may receive patches specific to CLIP OS.</p>
<div class="section" id="src-external-linux">
<h4><a class="toc-backref" href="#id25"><code class="docutils literal notranslate"><span class="pre">src/external/linux/</span></code></a><a class="headerlink" href="#src-external-linux" title="Permalink to this headline">¶</a></h4>
<p>Upstream Linux kernel sources with our sets of patches in dedicated branches.</p>
</div>
<div class="section" id="src-external-systemd">
<h4><a class="toc-backref" href="#id26"><code class="docutils literal notranslate"><span class="pre">src/external/systemd/</span></code></a><a class="headerlink" href="#src-external-systemd" title="Permalink to this headline">¶</a></h4>
<p>Upstream systemd source code with both <a class="reference external" href="https://github.com/systemd/systemd">systemd</a> and <a class="reference external" href="https://github.com/systemd/systemd-stable">systemd-stable</a> code branches.</p>
</div>
</div>
<div class="section" id="src-platform">
<h3><a class="toc-backref" href="#id27"><code class="docutils literal notranslate"><span class="pre">src/platform/</span></code></a><a class="headerlink" href="#src-platform" title="Permalink to this headline">¶</a></h3>
<p>This directory encloses all the repositories of the in-house sub-projects which
are part of CLIP OS.</p>
</div>
<div class="section" id="src-portage">
<h3><a class="toc-backref" href="#id28"><code class="docutils literal notranslate"><span class="pre">src/portage/</span></code></a><a class="headerlink" href="#src-portage" title="Permalink to this headline">¶</a></h3>
<p>This directory encloses all the Portage tree overlays exposed in the SDK.</p>
<div class="tip admonition">
<p class="first admonition-title">Third-party Portage tree overlays</p>
<p class="last">Any potential third-party Portage tree overlays must be added here.</p>
</div>
<div class="section" id="src-portage-gentoo">
<h4><a class="toc-backref" href="#id29"><code class="docutils literal notranslate"><span class="pre">src/portage/gentoo/</span></code></a><a class="headerlink" href="#src-portage-gentoo" title="Permalink to this headline">¶</a></h4>
<p>The upstream Gentoo Portage tree.</p>
</div>
<div class="section" id="src-portage-clipos">
<h4><a class="toc-backref" href="#id30"><code class="docutils literal notranslate"><span class="pre">src/portage/clipos/</span></code></a><a class="headerlink" href="#src-portage-clipos" title="Permalink to this headline">¶</a></h4>
<p>The CLIP OS Portage tree overlay containing <code class="docutils literal notranslate"><span class="pre">ebuild</span></code> files, <em>eclasses</em>, and
Portage profiles that are specific to CLIP OS.</p>
</div>
</div>
</div>
<div class="section" id="toolkit">
<h2><a class="toc-backref" href="#id31"><code class="docutils literal notranslate"><span class="pre">toolkit/</span></code></a><a class="headerlink" href="#toolkit" title="Permalink to this headline">¶</a></h2>
<p>The CLIP OS toolkit.</p>
<div class="tip admonition">
<p class="first admonition-title">Notable files</p>
<ul class="last simple">
<li><code class="docutils literal notranslate"><span class="pre">repo_root.justfile</span></code>: The source tree root (symlinked in the source tree
root) <em>justfile</em>.</li>
<li><code class="docutils literal notranslate"><span class="pre">source_me.sh</span></code>: The script to source to setup the Python virtualenv.</li>
</ul>
</div>
<div class="section" id="tookit-cosmk">
<h3><a class="toc-backref" href="#id32"><code class="docutils literal notranslate"><span class="pre">tookit/cosmk/</span></code></a><a class="headerlink" href="#tookit-cosmk" title="Permalink to this headline">¶</a></h3>
<p>The Python module used to setup and launch SDKs to build CLIP OS.</p>
</div>
<div class="section" id="tookit-doc">
<h3><a class="toc-backref" href="#id33"><code class="docutils literal notranslate"><span class="pre">tookit/doc/</span></code></a><a class="headerlink" href="#tookit-doc" title="Permalink to this headline">¶</a></h3>
<p>The toolkit documentation.</p>
</div>
<div class="section" id="tookit-docroot">
<h3><a class="toc-backref" href="#id34"><code class="docutils literal notranslate"><span class="pre">tookit/docroot/</span></code></a><a class="headerlink" href="#tookit-docroot" title="Permalink to this headline">¶</a></h3>
<p>The root and configuration files used to build the full CLIP OS documentation.</p>
</div>
<div class="section" id="tookit-qa">
<h3><a class="toc-backref" href="#id35"><code class="docutils literal notranslate"><span class="pre">tookit/qa/</span></code></a><a class="headerlink" href="#tookit-qa" title="Permalink to this headline">¶</a></h3>
<p>Python tools and configuration used for QA for the <code class="docutils literal notranslate"><span class="pre">cosmk</span></code> module.</p>
</div>
<div class="section" id="tookit-repo-scripts">
<h3><a class="toc-backref" href="#id36"><code class="docutils literal notranslate"><span class="pre">tookit/repo-scripts/</span></code></a><a class="headerlink" href="#tookit-repo-scripts" title="Permalink to this headline">¶</a></h3>
<p>Scripts used with the <code class="docutils literal notranslate"><span class="pre">repo</span> <span class="pre">forall</span></code> command to run specific actions depending
on context. Those scripts are usually calls by <code class="docutils literal notranslate"><span class="pre">just</span></code> recipes.</p>
</div>
<div class="section" id="tookit-scripts">
<h3><a class="toc-backref" href="#id37"><code class="docutils literal notranslate"><span class="pre">tookit/scripts/</span></code></a><a class="headerlink" href="#tookit-scripts" title="Permalink to this headline">¶</a></h3>
<p>Helpers scripts.</p>
</div>
</div>
<div class="section" id="justfile">
<h2><a class="toc-backref" href="#id38"><code class="docutils literal notranslate"><span class="pre">justfile</span></code></a><a class="headerlink" href="#justfile" title="Permalink to this headline">¶</a></h2>
<p>The root <code class="docutils literal notranslate"><span class="pre">Justfile</span></code> with the often used commands and recipes to work on the
project and interact easily with the Git repositories.</p>
<div class="tip admonition">
<p class="first admonition-title">Origin of this file</p>
<p class="last">This file is symlinked at the root of the source tree by the toolkit’s
<code class="docutils literal notranslate"><span class="pre">source_me.sh</span></code>. It won’t show up here until you have <code class="docutils literal notranslate"><span class="pre">source</span></code>’d that
specific file.</p>
</div>
</div>
<div class="section" id="license">
<h2><a class="toc-backref" href="#id39"><code class="docutils literal notranslate"><span class="pre">LICENSE</span></code></a><a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h2>
<p>The full text of the Lesser GNU Public License version 2.1.</p>
<div class="tip admonition">
<p class="first admonition-title">Origin of this file</p>
<p class="last">This file is symlinked at the root of the source tree by <code class="docutils literal notranslate"><span class="pre">repo</span></code>.</p>
</div>
</div>
<div class="section" id="readme-first">
<h2><a class="toc-backref" href="#id40"><code class="docutils literal notranslate"><span class="pre">README-FIRST</span></code></a><a class="headerlink" href="#readme-first" title="Permalink to this headline">¶</a></h2>
<p>A short document about how to get started once you have successfully fetched
and synchonize the CLIP OS source tree on your development setup.</p>
<div class="tip admonition">
<p class="first admonition-title">Origin of this file</p>
<p class="last">This file is symlinked at the root of the source tree by <code class="docutils literal notranslate"><span class="pre">repo</span></code>.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="contribute.html" class="btn btn-neutral float-right" title="How to contribute" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="build.html" class="btn btn-neutral" title="Building" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, ANSSI. CLIP OS is a trademark of the French Republic. For more details, see the &#34;How to derive this project&#34; section. The contents of this documentation is available under the Open License version 2.0 as published by Etalab (French task force for Open Data).

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'5.0.0_alpha1',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>