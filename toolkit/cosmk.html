




<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>cosmk Python API reference &mdash; CLIP OS 5.0.0_alpha1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/colors.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="How to derive this project" href="derive.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> CLIP OS
          

          
            
            <img src="../_static/clipos_logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                5.0 (Alpha)
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">CLIP OS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../clipos/architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../clipos/security.html">Security objectives</a></li>
<li class="toctree-l1"><a class="reference internal" href="../clipos/kernel.html">Kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../clipos/secure_boot.html">Secure Boot support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../clipos/roadmap.html">Roadmap</a></li>
</ul>
<p class="caption"><span class="caption-text">Development environment</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Environment setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="build.html">Building</a></li>
<li class="toctree-l1"><a class="reference internal" href="source-tree.html">Source tree organization</a></li>
</ul>
<p class="caption"><span class="caption-text">Contributing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contribute.html">How to contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="derive.html">How to derive this project</a></li>
</ul>
<p class="caption"><span class="caption-text">API &amp; Reference</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">cosmk</span></code> Python API reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-cosmk.__main__"><code class="docutils literal notranslate"><span class="pre">cosmk.__main__</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-cosmk.commons"><code class="docutils literal notranslate"><span class="pre">cosmk.commons</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-cosmk.completion"><code class="docutils literal notranslate"><span class="pre">cosmk.completion</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-cosmk.container"><code class="docutils literal notranslate"><span class="pre">cosmk.container</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-cosmk.exceptions"><code class="docutils literal notranslate"><span class="pre">cosmk.exceptions</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-cosmk.features"><code class="docutils literal notranslate"><span class="pre">cosmk.features</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-cosmk.fs"><code class="docutils literal notranslate"><span class="pre">cosmk.fs</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-cosmk.healthcheck"><code class="docutils literal notranslate"><span class="pre">cosmk.healthcheck</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-cosmk.instrumentation"><code class="docutils literal notranslate"><span class="pre">cosmk.instrumentation</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-cosmk.log"><code class="docutils literal notranslate"><span class="pre">cosmk.log</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-cosmk.mount"><code class="docutils literal notranslate"><span class="pre">cosmk.mount</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-cosmk.privileges"><code class="docutils literal notranslate"><span class="pre">cosmk.privileges</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-cosmk.product"><code class="docutils literal notranslate"><span class="pre">cosmk.product</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-cosmk.recipe"><code class="docutils literal notranslate"><span class="pre">cosmk.recipe</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-cosmk.sourcetree"><code class="docutils literal notranslate"><span class="pre">cosmk.sourcetree</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-cosmk.sdk"><code class="docutils literal notranslate"><span class="pre">cosmk.sdk</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-cosmk.virt"><code class="docutils literal notranslate"><span class="pre">cosmk.virt</span></code> module</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">CLIP OS</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li><code class="docutils literal notranslate"><span class="pre">cosmk</span></code> Python API reference</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/toolkit/cosmk.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-cosmk">
<span id="cosmk-python-api-reference"></span><span id="cosmk"></span><h1><code class="docutils literal notranslate"><span class="pre">cosmk</span></code> Python API reference<a class="headerlink" href="#module-cosmk" title="Permalink to this headline">¶</a></h1>
<p>The CLI tool of the CLIP OS toolkit</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p><strong>This module has side-effects on the Python runtime!</strong></p>
<p>Since parts of this module and its submodule require super-user rights to
perform some vital operations (<em>e.g.</em> managing Linux containers or creating
files with all kinds of user rights), this module must be imported from a
privileged Python runtime (<em>i.e.</em> a runtime with <code class="docutils literal notranslate"><span class="pre">EUID</span></code> and <code class="docutils literal notranslate"><span class="pre">EGID</span></code> both
equal to <em>0</em>).</p>
<p>The side-effects on the Python runtime are explained by the fact that, on
import, the <em>real</em> and <em>effective</em> UIDs and GIDs are changed to some
unprivileged UID and GID (see <em>Note</em> below). This is made to be able to
operate most of the time without explicit super-user privileges since most
of the logic of this Python package do not require super-user privileges
(<em>e.g.</em> for managing parts of the CLIP OS sources tree or parsing
configuration files).</p>
<p>But as the <em>saved-set</em> UID and GID are kept to 0, it is still possible for
the Python runtime to retrieve privileged <em>real</em> and <em>effective</em> UIDs and
GIDs. This super-user privileges retrieval (also inaccurately referenced as
<em>privilege elevation</em>) is done with the context manager
<a class="reference internal" href="#cosmk.privileges.ElevatedPrivileges" title="cosmk.privileges.ElevatedPrivileges"><code class="xref py py-class docutils literal notranslate"><span class="pre">cosmk.privileges.ElevatedPrivileges</span></code></a> which temporarily flips the
values of both <em>real</em> and <em>effective</em> UIDs and GIDs with the values of
<em>saved-set</em> UID and GID (respectively) and vice versa. This enables us to
build seamless privileged sections of code without having to invoke
<code class="docutils literal notranslate"><span class="pre">sudo</span></code> or any other method or privileges elevation (that may require user
intevention such as password entry).</p>
<p>Please note that this construction was never meant to be a security
mechanism against unsafe code evaluation as it is still possible to
retrieve elevated privileges with the same method as the
<cite>ElevatedPrivileges</cite> context manager does. The only purpose of this was to
avoid running the whole <cite>cosmk</cite> package and its module dependencies with
a privileged Python runtime which might cause issues.</p>
<p class="last">If imported from an unprivileged Python runtime, this module will fail at
the first attempt of privileges elevation with the context manager
<a class="reference internal" href="#cosmk.privileges.ElevatedPrivileges" title="cosmk.privileges.ElevatedPrivileges"><code class="xref py py-class docutils literal notranslate"><span class="pre">cosmk.privileges.ElevatedPrivileges</span></code></a>.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Since the context manager <a class="reference internal" href="#cosmk.privileges.ElevatedPrivileges" title="cosmk.privileges.ElevatedPrivileges"><code class="xref py py-class docutils literal notranslate"><span class="pre">cosmk.privileges.ElevatedPrivileges</span></code></a>
requires unprivileged UID and GID to change both <em>real</em> and <em>effective</em>
UIDs and GIDs at initialization, this module uses the environment variables
<code class="docutils literal notranslate"><span class="pre">SUDO_UID</span></code> and <code class="docutils literal notranslate"><span class="pre">SUDO_GID</span></code>. These variables are provided by the famous
utility <code class="docutils literal notranslate"><span class="pre">sudo</span></code> and contain the unprivileged UID and GID. This is the
reason why the <code class="docutils literal notranslate"><span class="pre">cosmk</span></code> utility recalls itself through <code class="docutils literal notranslate"><span class="pre">sudo</span></code> when
launched without super-user privileges.</p>
</div>
<div class="section" id="module-cosmk.__main__">
<span id="cosmk-main-module"></span><h2><code class="docutils literal notranslate"><span class="pre">cosmk.__main__</span></code> module<a class="headerlink" href="#module-cosmk.__main__" title="Permalink to this headline">¶</a></h2>
<p>The CLIP OS toolkit command line utility</p>
<dl class="function">
<dt id="cosmk.__main__.main">
<code class="descclassname">cosmk.__main__.</code><code class="descname">main</code><span class="sig-paren">(</span><em>as_module=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/__main__.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.__main__.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Main function of the cosmk command-line utility.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>as_module</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – <cite>True</cite> when called as a module (<em>e.g.</em> <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span>
<span class="pre">cosmk</span></code>)</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cosmk.__main__.sudo_ourselves">
<code class="descclassname">cosmk.__main__.</code><code class="descname">sudo_ourselves</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/__main__.html#sudo_ourselves"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.__main__.sudo_ourselves" title="Permalink to this definition">¶</a></dt>
<dd><p>Replace the current process by recalling the same command that
originated the current process (using <code class="docutils literal notranslate"><span class="pre">sys.argv</span></code>) but by calling it
through <code class="docutils literal notranslate"><span class="pre">sudo</span></code>.
In case of success, this function does not return since it calls
<code class="docutils literal notranslate"><span class="pre">execve(2)</span></code>.</p>
<p>The command line that calls <code class="docutils literal notranslate"><span class="pre">sudo</span></code> ensures to keep the environment
variables of the unprivileged user (as well as the contents of <code class="docutils literal notranslate"><span class="pre">PATH</span></code>
which can be overwritten by Sudo for safety reasons).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This requires Sudo 1.8.21 or above.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><a class="reference internal" href="#cosmk.exceptions.CosmkError" title="cosmk.exceptions.CosmkError"><strong>CosmkError</strong></a> – if <code class="docutils literal notranslate"><span class="pre">sudo</span></code> could not be found in PATH or if the call has failed</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-cosmk.commons">
<span id="cosmk-commons-module"></span><h2><code class="docutils literal notranslate"><span class="pre">cosmk.commons</span></code> module<a class="headerlink" href="#module-cosmk.commons" title="Permalink to this headline">¶</a></h2>
<p>Miscellanous utility functions and helpers that may be used globally in this
package.</p>
<dl class="function">
<dt id="cosmk.commons.is_tty_attached">
<code class="descclassname">cosmk.commons.</code><code class="descname">is_tty_attached</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/commons.html#is_tty_attached"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.commons.is_tty_attached" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if the current process is attached to a TTY (<em>i.e.</em> if both
<code class="docutils literal notranslate"><span class="pre">stdin</span></code>, <code class="docutils literal notranslate"><span class="pre">stdout</span></code> and <code class="docutils literal notranslate"><span class="pre">stderr</span></code> are TTY).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cosmk.commons.line">
<code class="descclassname">cosmk.commons.</code><code class="descname">line</code><span class="sig-paren">(</span><em>msg</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/commons.html#line"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.commons.line" title="Permalink to this definition">¶</a></dt>
<dd><p>Rewrap a message by stripping the unneeded indentation, removing leading
and trailing whitespaces and joining all the lines into one unique text
line.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">line</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="go">        A potentially long message that</span>
<span class="go">        can overflow the 79 chars limit</span>
<span class="go">        of PEP 8.</span>
<span class="go">&#39;&#39;&#39;)</span>
<span class="go">&quot;A potentially long message that can overflow the 79 chars limit of PEP 8.&quot;</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cosmk.commons.linux_version">
<code class="descclassname">cosmk.commons.</code><code class="descname">linux_version</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/commons.html#linux_version"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.commons.linux_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the current Linux kernel version under the form of a 3-tuple of
int (<em>e.g.</em> on a <code class="docutils literal notranslate"><span class="pre">4.16.12-1-ARCH</span></code> Linux kernel, this function will return
the tuple <code class="xref py py-data docutils literal notranslate"><span class="pre">(4,</span> <span class="pre">16,</span> <span class="pre">12)</span></code>).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><a class="reference internal" href="#cosmk.exceptions.CosmkEnvironmentError" title="cosmk.exceptions.CosmkEnvironmentError"><strong>CosmkEnvironmentError</strong></a> – in case the underlying system does not run
a Linux kernel or if the kernel version string is unparseable</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tuple</span></code>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cosmk.commons.rewrap">
<code class="descclassname">cosmk.commons.</code><code class="descname">rewrap</code><span class="sig-paren">(</span><em>msg</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/commons.html#rewrap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.commons.rewrap" title="Permalink to this definition">¶</a></dt>
<dd><p>Rewrap a message by stripping the unneeded indentation and removing
leading and trailing whitespaces.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cosmk.commons.run">
<code class="descclassname">cosmk.commons.</code><code class="descname">run</code><span class="sig-paren">(</span><em>cmd</em>, <em>terminal=False</em>, <em>stdout=None</em>, <em>stderr=None</em>, <em>stdouterr=None</em>, <em>timeout=None</em>, <em>check=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/commons.html#run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.commons.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper around the <code class="docutils literal notranslate"><span class="pre">submodule.run</span></code> function with capture of the output
streams (<code class="docutils literal notranslate"><span class="pre">stdout</span></code>, <code class="docutils literal notranslate"><span class="pre">stderr</span></code> or both streams interlaced as one).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>cmd</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>], <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – the command line to run (either in the form of a sh-escaped
command line string or a list of arguments as <cite>subprocess</cite> takes)</li>
<li><strong>terminal</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – whether or not the terminal shall be forwarded to the
command</li>
<li><strong>stdout</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Io</span></code>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.AnyStr" title="(in Python v3.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">AnyStr</span></code></a>]]) – file-object receiving the capture of the command <code class="docutils literal notranslate"><span class="pre">stdout</span></code>
output stream</li>
<li><strong>stderr</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Io</span></code>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.AnyStr" title="(in Python v3.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">AnyStr</span></code></a>]]) – file-object receiving the capture of the command <code class="docutils literal notranslate"><span class="pre">stderr</span></code>
output stream</li>
<li><strong>stdouterr</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Io</span></code>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.AnyStr" title="(in Python v3.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">AnyStr</span></code></a>]]) – file-object receiving the capture of the command output
stream with both <code class="docutils literal notranslate"><span class="pre">stdout</span></code> and <code class="docutils literal notranslate"><span class="pre">stderr</span></code> interlaced (<em>i.e.</em> as it
appears in an interactive shell without output redirection)</li>
<li><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>]) – the time out value to apply to the command run</li>
<li><strong>check</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – raise an exception if the command exits with a non-null
return value</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first simple">
<li><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.7)"><strong>ValueError</strong></a> – if bad parameters are given to this function</li>
<li><a class="reference internal" href="#cosmk.exceptions.SystemCommandError" title="cosmk.exceptions.SystemCommandError"><strong>SystemCommandError</strong></a> – in case of failure when executing the command</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-cosmk.completion">
<span id="cosmk-completion-module"></span><h2><code class="docutils literal notranslate"><span class="pre">cosmk.completion</span></code> module<a class="headerlink" href="#module-cosmk.completion" title="Permalink to this headline">¶</a></h2>
<p>Auto-completion helpers to be used with argcomplete and argparse methods
within <a class="reference internal" href="#module-cosmk.__main__" title="cosmk.__main__"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cosmk.__main__</span></code></a>.</p>
<dl class="function">
<dt id="cosmk.completion.features_for_action">
<code class="descclassname">cosmk.completion.</code><code class="descname">features_for_action</code><span class="sig-paren">(</span><em>action</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/completion.html#features_for_action"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.completion.features_for_action" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the list of recipe feature names which provide the given action
name.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>action</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – the requested action name</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cosmk.completion.product_completer">
<code class="descclassname">cosmk.completion.</code><code class="descname">product_completer</code><span class="sig-paren">(</span><em>prefix</em>, <em>parsed_args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/completion.html#product_completer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.completion.product_completer" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of all the products available in the current repo source
tree.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cosmk.completion.recipe_completer">
<code class="descclassname">cosmk.completion.</code><code class="descname">recipe_completer</code><span class="sig-paren">(</span><em>prefix</em>, <em>parsed_args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/completion.html#recipe_completer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.completion.recipe_completer" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of all the recipes available in the current repo source
tree that would be appropriate regarding the current parsed arguments from
the <code class="xref py py-func docutils literal notranslate"><span class="pre">main()</span></code> function of <code class="docutils literal notranslate"><span class="pre">cosmk</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-cosmk.container">
<span id="cosmk-container-module"></span><h2><code class="docutils literal notranslate"><span class="pre">cosmk.container</span></code> module<a class="headerlink" href="#module-cosmk.container" title="Permalink to this headline">¶</a></h2>
<p>Module providing functions and classes to handle OCI Linux containers with
<code class="docutils literal notranslate"><span class="pre">runc</span></code>.</p>
<dl class="class">
<dt id="cosmk.container.Container">
<em class="property">class </em><code class="descclassname">cosmk.container.</code><code class="descname">Container</code><span class="sig-paren">(</span><em>name</em>, <em>rootfs</em>, <em>hostname=None</em>, <em>readonly_root=False</em>, <em>shared_host_netns=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/container.html#Container"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.container.Container" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Overly-simplified Linux OCI container abstraction with wrappers around
the <code class="docutils literal notranslate"><span class="pre">runc</span></code> runtime for the command execution methods.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – the name of the container</li>
<li><strong>rootfs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – the path to the rootfs squashfs image file</li>
<li><strong>hostname</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – the hostname within the container (defaults to the
container name if set to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">None</span></code></a>)</li>
<li><strong>readonly_root</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – whether or not the rootfs shall be read-only mounted</li>
<li><strong>shared_host_netns</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – whether or not the container shall share the
network namespace of the host in order to have networking access (to
prevent having the hassle to configure IP routing and filtering on the
host for this container)</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Eventhough this abstraction can be used independently outside of
<code class="docutils literal notranslate"><span class="pre">cosmk</span></code> context, this class (and this module in a greater extent)
is primarily intended to be used by the CLIP OS SDK abstraction to
produce ephemeral containers (<em>i.e.</em> container sessions with their
rootfs meant to be destroyed on closing, with still the possibility of
being snapshotted into a reusable container squashfs image).</p>
</div>
<dl class="attribute">
<dt id="cosmk.container.Container.OCI_SPECS_VERSION">
<code class="descname">OCI_SPECS_VERSION</code><em class="property"> = (1, 0, 0)</em><a class="headerlink" href="#cosmk.container.Container.OCI_SPECS_VERSION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="cosmk.container.Container.RUNTIME_WORKING_DIR_REPO_SUBPATH">
<code class="descname">RUNTIME_WORKING_DIR_REPO_SUBPATH</code><em class="property"> = 'run/containers'</em><a class="headerlink" href="#cosmk.container.Container.RUNTIME_WORKING_DIR_REPO_SUBPATH" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="cosmk.container.Container.mountpoints">
<code class="descname">mountpoints</code><a class="headerlink" href="#cosmk.container.Container.mountpoints" title="Permalink to this definition">¶</a></dt>
<dd><p>This list does not include the root mountpoint.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference internal" href="#cosmk.container.ContainerMountpoint" title="cosmk.container.ContainerMountpoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContainerMountpoint</span></code></a>]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="cosmk.container.Container.required_mountpoints">
<code class="descname">required_mountpoints</code><a class="headerlink" href="#cosmk.container.Container.required_mountpoints" title="Permalink to this definition">¶</a></dt>
<dd><p>The usual required default system mountpoints (<em>e.g.</em> <code class="docutils literal notranslate"><span class="pre">/proc</span></code>,
<code class="docutils literal notranslate"><span class="pre">/dev</span></code>, etc.) for the container to run properly.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference internal" href="#cosmk.container.ContainerMountpoint" title="cosmk.container.ContainerMountpoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContainerMountpoint</span></code></a>]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cosmk.container.Container.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/container.html#Container.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.container.Container.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Shortcut function to run a single command in this container (a
session will be instanciated temporarily just for this command).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cosmk.container.Container.session">
<code class="descname">session</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/container.html#Container.session"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.container.Container.session" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a session from this container in order to be able to call
multiple commands on the same container instance and/or snapshotting
the container contents into a squashfs image reusable by the
<cite>Container</cite> class for future usage.</p>
<p>This context manager is in charge of creating the runc bundle as a
temporary directory (“temporary” meaning that its existence will be
limited to the time span where the context manager is opened).
This context manager has also the responsibility of mounting the
container root filesystem (from its base squashfs image) in the
suitable directory.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterator</span></code></a>[<a class="reference internal" href="#cosmk.container.ContainerSession" title="cosmk.container.ContainerSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContainerSession</span></code></a>]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="cosmk.container.Container.unshared_namespaces">
<code class="descname">unshared_namespaces</code><a class="headerlink" href="#cosmk.container.Container.unshared_namespaces" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Set" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cosmk.container.ContainerDeviceBinding">
<em class="property">class </em><code class="descclassname">cosmk.container.</code><code class="descname">ContainerDeviceBinding</code><span class="sig-paren">(</span><em>host_device</em>, <em>container_device=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/container.html#ContainerDeviceBinding"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.container.ContainerDeviceBinding" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Device node binding for a container that can be output as a dict for the
runc JSON spec.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The OCI runtime automatically provides these devices nodes:
<code class="docutils literal notranslate"><span class="pre">/dev/null</span></code>, <code class="docutils literal notranslate"><span class="pre">/dev/zero</span></code>, <code class="docutils literal notranslate"><span class="pre">/dev/full</span></code>, <code class="docutils literal notranslate"><span class="pre">/dev/random</span></code>,
<code class="docutils literal notranslate"><span class="pre">/dev/urandom</span></code>, <code class="docutils literal notranslate"><span class="pre">/dev/tty</span></code>, <code class="docutils literal notranslate"><span class="pre">/dev/console</span></code>, <code class="docutils literal notranslate"><span class="pre">/dev/ptmx</span></code>.
Therefore, there is no need to specify them.
See: &lt;<a class="reference external" href="https://github.com/opencontainers/runtime-spec/blob/master/config-linux.md#default-devices">https://github.com/opencontainers/runtime-spec/blob/master/config-linux.md#default-devices</a>&gt;_</p>
</div>
<dl class="method">
<dt id="cosmk.container.ContainerDeviceBinding.as_dict">
<code class="descname">as_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/container.html#ContainerDeviceBinding.as_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.container.ContainerDeviceBinding.as_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Return this container device binding as a dict ready to be
JSON-ified for the runc <code class="docutils literal notranslate"><span class="pre">config.json</span></code> specification.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cosmk.container.ContainerDeviceBinding.cgroup_authorization_dict">
<code class="descname">cgroup_authorization_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/container.html#ContainerDeviceBinding.cgroup_authorization_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.container.ContainerDeviceBinding.cgroup_authorization_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the device cgroup authorization dict structure ready to be
JSON-ified for the runc <code class="docutils literal notranslate"><span class="pre">config.json</span></code> specification.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cosmk.container.ContainerMountpoint">
<em class="property">class </em><code class="descclassname">cosmk.container.</code><code class="descname">ContainerMountpoint</code><span class="sig-paren">(</span><em>source</em>, <em>target</em>, <em>type=None</em>, <em>options=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/container.html#ContainerMountpoint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.container.ContainerMountpoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Mountpoint for a container (with the destination path within the
container rootfs) that can be output as a dict for the runc JSON spec.</p>
<dl class="method">
<dt id="cosmk.container.ContainerMountpoint.as_dict">
<code class="descname">as_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/container.html#ContainerMountpoint.as_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.container.ContainerMountpoint.as_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Return this container mountpoint as a dict ready to be JSON-ified
for the runc <code class="docutils literal notranslate"><span class="pre">config.json</span></code> specification.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cosmk.container.ContainerSession">
<em class="property">class </em><code class="descclassname">cosmk.container.</code><code class="descname">ContainerSession</code><span class="sig-paren">(</span><em>container</em>, <em>bundle_dir</em>, <em>runc_container_name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/container.html#ContainerSession"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.container.ContainerSession" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Session of a container instance.</p>
<dl class="method">
<dt id="cosmk.container.ContainerSession.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>command</em>, <em>cwd='/'</em>, <em>env=None</em>, <em>terminal=False</em>, <em>user=(0</em>, <em>0)</em>, <em>stdout=None</em>, <em>stderr=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/container.html#ContainerSession.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.container.ContainerSession.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a command in this container session.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>command</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – the command to run (command line splitted into a list
in the manner of the <code class="docutils literal notranslate"><span class="pre">argv</span></code> argument of the traditional
<code class="docutils literal notranslate"><span class="pre">execve(2)</span></code> syscall)</li>
<li><strong>cwd</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – the current working directory</li>
<li><strong>env</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]]) – the environment variable set</li>
<li><strong>terminal</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – hook the current TTY to the container if <code class="docutils literal notranslate"><span class="pre">True</span></code></li>
<li><strong>user</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tuple</span></code>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>]) – UID and GID couple values to use for the process run in
the container</li>
<li><strong>stdout</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Io</span></code>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.AnyStr" title="(in Python v3.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">AnyStr</span></code></a>]]) – facultative stream object able to receive for writing
the standard output of the process run in the container</li>
<li><strong>stderr</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Io</span></code>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.AnyStr" title="(in Python v3.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">AnyStr</span></code></a>]]) – facultative stream object able to receive for writing
the standard error output of the process run in the container</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cosmk.container.ContainerSession.snapshot">
<code class="descname">snapshot</code><span class="sig-paren">(</span><em>squashfs_filepath</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/container.html#ContainerSession.snapshot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.container.ContainerSession.snapshot" title="Permalink to this definition">¶</a></dt>
<dd><p>Snapshot the rootfs of this container</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-cosmk.exceptions">
<span id="cosmk-exceptions-module"></span><h2><code class="docutils literal notranslate"><span class="pre">cosmk.exceptions</span></code> module<a class="headerlink" href="#module-cosmk.exceptions" title="Permalink to this headline">¶</a></h2>
<p>CLIP OS toolkit exceptions</p>
<dl class="exception">
<dt id="cosmk.exceptions.ContainerSnapshotError">
<em class="property">exception </em><code class="descclassname">cosmk.exceptions.</code><code class="descname">ContainerSnapshotError</code><a class="reference internal" href="../_modules/cosmk/exceptions.html#ContainerSnapshotError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.exceptions.ContainerSnapshotError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cosmk.exceptions.CosmkError" title="cosmk.exceptions.CosmkError"><code class="xref py py-class docutils literal notranslate"><span class="pre">cosmk.exceptions.CosmkError</span></code></a></p>
<p>Exception raised when a container sesssion snapshotting fails.</p>
</dd></dl>

<dl class="exception">
<dt id="cosmk.exceptions.CosmkEnvironmentError">
<em class="property">exception </em><code class="descclassname">cosmk.exceptions.</code><code class="descname">CosmkEnvironmentError</code><a class="reference internal" href="../_modules/cosmk/exceptions.html#CosmkEnvironmentError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.exceptions.CosmkEnvironmentError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cosmk.exceptions.CosmkError" title="cosmk.exceptions.CosmkError"><code class="xref py py-class docutils literal notranslate"><span class="pre">cosmk.exceptions.CosmkError</span></code></a></p>
<p>Exception raised when the runtime environment does not meet the
requirements to run properly (<em>e.g.</em> a system utility command is
missing).</p>
</dd></dl>

<dl class="exception">
<dt id="cosmk.exceptions.CosmkError">
<em class="property">exception </em><code class="descclassname">cosmk.exceptions.</code><code class="descname">CosmkError</code><a class="reference internal" href="../_modules/cosmk/exceptions.html#CosmkError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.exceptions.CosmkError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></a></p>
<p>Base exception for all the other cosmk related exceptions. This
exception can also be raised when the error is unknown or unhandled by the
tool.</p>
</dd></dl>

<dl class="exception">
<dt id="cosmk.exceptions.InstrumentationSpecificationError">
<em class="property">exception </em><code class="descclassname">cosmk.exceptions.</code><code class="descname">InstrumentationSpecificationError</code><a class="reference internal" href="../_modules/cosmk/exceptions.html#InstrumentationSpecificationError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.exceptions.InstrumentationSpecificationError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cosmk.exceptions.CosmkError" title="cosmk.exceptions.CosmkError"><code class="xref py py-class docutils literal notranslate"><span class="pre">cosmk.exceptions.CosmkError</span></code></a></p>
<p>Exception raised when the “instrumentation.toml” drop-in file is badly
formatted or has unexpected content.</p>
</dd></dl>

<dl class="exception">
<dt id="cosmk.exceptions.ProductPropertiesError">
<em class="property">exception </em><code class="descclassname">cosmk.exceptions.</code><code class="descname">ProductPropertiesError</code><a class="reference internal" href="../_modules/cosmk/exceptions.html#ProductPropertiesError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.exceptions.ProductPropertiesError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cosmk.exceptions.CosmkError" title="cosmk.exceptions.CosmkError"><code class="xref py py-class docutils literal notranslate"><span class="pre">cosmk.exceptions.CosmkError</span></code></a></p>
<p>Exception raised when a product has a bad “properties.toml”
definition.</p>
</dd></dl>

<dl class="exception">
<dt id="cosmk.exceptions.ProjectInRepoSourceTreeInUncleanState">
<em class="property">exception </em><code class="descclassname">cosmk.exceptions.</code><code class="descname">ProjectInRepoSourceTreeInUncleanState</code><a class="reference internal" href="../_modules/cosmk/exceptions.html#ProjectInRepoSourceTreeInUncleanState"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.exceptions.ProjectInRepoSourceTreeInUncleanState" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cosmk.exceptions.CosmkError" title="cosmk.exceptions.CosmkError"><code class="xref py py-class docutils literal notranslate"><span class="pre">cosmk.exceptions.CosmkError</span></code></a></p>
<p>Exception raised when a project within the CLIP OS repo source tree is
not in a clean state (<em>e.g.</em> unstaged elements).</p>
</dd></dl>

<dl class="exception">
<dt id="cosmk.exceptions.RecipeActionError">
<em class="property">exception </em><code class="descclassname">cosmk.exceptions.</code><code class="descname">RecipeActionError</code><a class="reference internal" href="../_modules/cosmk/exceptions.html#RecipeActionError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.exceptions.RecipeActionError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cosmk.exceptions.CosmkError" title="cosmk.exceptions.CosmkError"><code class="xref py py-class docutils literal notranslate"><span class="pre">cosmk.exceptions.CosmkError</span></code></a></p>
<p>Exception raised when a recipe has a bad “recipe.toml” definition.</p>
</dd></dl>

<dl class="exception">
<dt id="cosmk.exceptions.RecipeConfigurationError">
<em class="property">exception </em><code class="descclassname">cosmk.exceptions.</code><code class="descname">RecipeConfigurationError</code><a class="reference internal" href="../_modules/cosmk/exceptions.html#RecipeConfigurationError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.exceptions.RecipeConfigurationError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cosmk.exceptions.CosmkError" title="cosmk.exceptions.CosmkError"><code class="xref py py-class docutils literal notranslate"><span class="pre">cosmk.exceptions.CosmkError</span></code></a></p>
<p>Exception raised when a recipe has a bad “recipe.toml” definition.</p>
</dd></dl>

<dl class="exception">
<dt id="cosmk.exceptions.RepoSourceTreeManifestParsingError">
<em class="property">exception </em><code class="descclassname">cosmk.exceptions.</code><code class="descname">RepoSourceTreeManifestParsingError</code><a class="reference internal" href="../_modules/cosmk/exceptions.html#RepoSourceTreeManifestParsingError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.exceptions.RepoSourceTreeManifestParsingError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cosmk.exceptions.CosmkError" title="cosmk.exceptions.CosmkError"><code class="xref py py-class docutils literal notranslate"><span class="pre">cosmk.exceptions.CosmkError</span></code></a></p>
<p>Exception raised when a <code class="docutils literal notranslate"><span class="pre">repo</span></code> manifest file has an unexpected XML
structure or cannot be parsed as valid XML.</p>
</dd></dl>

<dl class="exception">
<dt id="cosmk.exceptions.SdkBootstrapError">
<em class="property">exception </em><code class="descclassname">cosmk.exceptions.</code><code class="descname">SdkBootstrapError</code><a class="reference internal" href="../_modules/cosmk/exceptions.html#SdkBootstrapError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.exceptions.SdkBootstrapError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cosmk.exceptions.CosmkError" title="cosmk.exceptions.CosmkError"><code class="xref py py-class docutils literal notranslate"><span class="pre">cosmk.exceptions.CosmkError</span></code></a></p>
<p>Exception raised when an error occurs while bootstrapping a SDK
image.</p>
</dd></dl>

<dl class="exception">
<dt id="cosmk.exceptions.SdkError">
<em class="property">exception </em><code class="descclassname">cosmk.exceptions.</code><code class="descname">SdkError</code><a class="reference internal" href="../_modules/cosmk/exceptions.html#SdkError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.exceptions.SdkError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cosmk.exceptions.CosmkError" title="cosmk.exceptions.CosmkError"><code class="xref py py-class docutils literal notranslate"><span class="pre">cosmk.exceptions.CosmkError</span></code></a></p>
<p>Exception raised when an error occurs inside a SDK container.</p>
</dd></dl>

<dl class="exception">
<dt id="cosmk.exceptions.SdkNotFoundError">
<em class="property">exception </em><code class="descclassname">cosmk.exceptions.</code><code class="descname">SdkNotFoundError</code><a class="reference internal" href="../_modules/cosmk/exceptions.html#SdkNotFoundError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.exceptions.SdkNotFoundError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cosmk.exceptions.CosmkError" title="cosmk.exceptions.CosmkError"><code class="xref py py-class docutils literal notranslate"><span class="pre">cosmk.exceptions.CosmkError</span></code></a></p>
<p>Exception raised when a target requires a SDK which cannot be found
because it has not been bootstrap (<em>i.e.</em> built) yet.</p>
</dd></dl>

<dl class="exception">
<dt id="cosmk.exceptions.SystemCommandError">
<em class="property">exception </em><code class="descclassname">cosmk.exceptions.</code><code class="descname">SystemCommandError</code><span class="sig-paren">(</span><em>command</em>, <em>reason=None</em>, <em>stdout=None</em>, <em>stderr=None</em>, <em>stdouterr=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/exceptions.html#SystemCommandError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.exceptions.SystemCommandError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cosmk.exceptions.CosmkError" title="cosmk.exceptions.CosmkError"><code class="xref py py-class docutils literal notranslate"><span class="pre">cosmk.exceptions.CosmkError</span></code></a></p>
<p>Exception raised when a system command (such as <code class="docutils literal notranslate"><span class="pre">mount(8)</span></code> or
<code class="docutils literal notranslate"><span class="pre">losetup(8)</span></code>) fails. Reason should be provided as arguments to the
exception.</p>
</dd></dl>

<dl class="exception">
<dt id="cosmk.exceptions.UnexpectedRepoSourceTreeStructure">
<em class="property">exception </em><code class="descclassname">cosmk.exceptions.</code><code class="descname">UnexpectedRepoSourceTreeStructure</code><a class="reference internal" href="../_modules/cosmk/exceptions.html#UnexpectedRepoSourceTreeStructure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.exceptions.UnexpectedRepoSourceTreeStructure" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cosmk.exceptions.CosmkError" title="cosmk.exceptions.CosmkError"><code class="xref py py-class docutils literal notranslate"><span class="pre">cosmk.exceptions.CosmkError</span></code></a></p>
<p>Exception raised when the repo directory structure does not match what
is expected or when the “.repo” directory cannot be found in the underlying
directory tree of the current working directory.</p>
</dd></dl>

<dl class="exception">
<dt id="cosmk.exceptions.VirtualizedEnvironmentError">
<em class="property">exception </em><code class="descclassname">cosmk.exceptions.</code><code class="descname">VirtualizedEnvironmentError</code><a class="reference internal" href="../_modules/cosmk/exceptions.html#VirtualizedEnvironmentError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.exceptions.VirtualizedEnvironmentError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cosmk.exceptions.CosmkError" title="cosmk.exceptions.CosmkError"><code class="xref py py-class docutils literal notranslate"><span class="pre">cosmk.exceptions.CosmkError</span></code></a></p>
<p>Exception raised when an operation on a virtualized environment (<em>e.g.</em>
a <cite>libvirt</cite> “domain”, a network configuration made by <cite>libvirt</cite>, <em>etc.</em>)
cannot be pursued or has failed.</p>
</dd></dl>

</div>
<div class="section" id="module-cosmk.features">
<span id="cosmk-features-module"></span><h2><code class="docutils literal notranslate"><span class="pre">cosmk.features</span></code> module<a class="headerlink" href="#module-cosmk.features" title="Permalink to this headline">¶</a></h2>
<p>This module manages all the recipe features.</p>
<p>These recipe features act like traits for <code class="docutils literal notranslate"><span class="pre">recipe.Recipe</span></code>’s.</p>
<dl class="class">
<dt id="cosmk.features.RecipeBundleFeature">
<em class="property">class </em><code class="descclassname">cosmk.features.</code><code class="descname">RecipeBundleFeature</code><span class="sig-paren">(</span><em>recipe</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/features.html#RecipeBundleFeature"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.features.RecipeBundleFeature" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cosmk.features.RecipeFeature" title="cosmk.features.RecipeFeature"><code class="xref py py-class docutils literal notranslate"><span class="pre">cosmk.features.RecipeFeature</span></code></a></p>
<p>Recipe feature for bundling (<em>e.g.</em> making a tar archive or a squashfs
image from any previous result of another recipe) whole or parts of the
final recipe target.</p>
<dl class="attribute">
<dt id="cosmk.features.RecipeBundleFeature.FEATURED_ATTRIBUTES">
<code class="descname">FEATURED_ATTRIBUTES</code><em class="property"> = {'bundle'}</em><a class="headerlink" href="#cosmk.features.RecipeBundleFeature.FEATURED_ATTRIBUTES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="cosmk.features.RecipeBundleFeature.NAME">
<code class="descname">NAME</code><em class="property"> = 'bundle'</em><a class="headerlink" href="#cosmk.features.RecipeBundleFeature.NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="cosmk.features.RecipeBundleFeature.SCHEMA">
<code class="descname">SCHEMA</code><em class="property"> = Schema({'bundle': {'sdk': Regex('^[^\\s/]+/[^\\s/]+$'), Optional('env'): {Regex('^[a-zA-Z\\_][a-zA-Z0-9\\_]*$'): &lt;class 'str'&gt;}, 'steps': And([&lt;class 'str'&gt;], &lt;built-in function len&gt;)}, &lt;class 'str'&gt;: &lt;class 'object'&gt;})</em><a class="headerlink" href="#cosmk.features.RecipeBundleFeature.SCHEMA" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cosmk.features.RecipeBundleFeature.bundle">
<code class="descname">bundle</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/features.html#RecipeBundleFeature.bundle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.features.RecipeBundleFeature.bundle" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cosmk.features.RecipeConfigureFeature">
<em class="property">class </em><code class="descclassname">cosmk.features.</code><code class="descname">RecipeConfigureFeature</code><span class="sig-paren">(</span><em>recipe</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/features.html#RecipeConfigureFeature"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.features.RecipeConfigureFeature" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cosmk.features.RecipeFeature" title="cosmk.features.RecipeFeature"><code class="xref py py-class docutils literal notranslate"><span class="pre">cosmk.features.RecipeFeature</span></code></a></p>
<p>Recipe feature for configuring root trees built during a recipe root
feature</p>
<dl class="attribute">
<dt id="cosmk.features.RecipeConfigureFeature.FEATURED_ATTRIBUTES">
<code class="descname">FEATURED_ATTRIBUTES</code><em class="property"> = {'configure'}</em><a class="headerlink" href="#cosmk.features.RecipeConfigureFeature.FEATURED_ATTRIBUTES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="cosmk.features.RecipeConfigureFeature.NAME">
<code class="descname">NAME</code><em class="property"> = 'configure'</em><a class="headerlink" href="#cosmk.features.RecipeConfigureFeature.NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="cosmk.features.RecipeConfigureFeature.SCHEMA">
<code class="descname">SCHEMA</code><em class="property"> = Schema({'configure': {'sdk': Regex('^[^\\s/]+/[^\\s/]+$'), Optional('env'): {Regex('^[a-zA-Z\\_][a-zA-Z0-9\\_]*$'): &lt;class 'str'&gt;}, 'root': Regex('^[^\\s/]+/[^\\s/]+$'), 'steps': And([&lt;class 'str'&gt;], &lt;built-in function len&gt;)}, &lt;class 'str'&gt;: &lt;class 'object'&gt;})</em><a class="headerlink" href="#cosmk.features.RecipeConfigureFeature.SCHEMA" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cosmk.features.RecipeConfigureFeature.configure">
<code class="descname">configure</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/features.html#RecipeConfigureFeature.configure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.features.RecipeConfigureFeature.configure" title="Permalink to this definition">¶</a></dt>
<dd><p>TODO</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cosmk.features.RecipeFeature">
<em class="property">class </em><code class="descclassname">cosmk.features.</code><code class="descname">RecipeFeature</code><span class="sig-paren">(</span><em>recipe</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/features.html#RecipeFeature"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.features.RecipeFeature" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Recipe feature meta-class</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>recipe</strong> (<a class="reference internal" href="#cosmk.recipe.Recipe" title="cosmk.recipe.Recipe"><code class="xref py py-class docutils literal notranslate"><span class="pre">Recipe</span></code></a>) – the recipe on which this feature applies</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Variables:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference internal" href="#cosmk.features.RecipeBundleFeature.NAME" title="cosmk.features.RecipeBundleFeature.NAME"><strong>NAME</strong></a> – the name of the feature that can be specified in the
<code class="docutils literal notranslate"><span class="pre">features</span></code> list in the recipe configuration files to specify that a
recipe implements this current feature</li>
<li><a class="reference internal" href="#cosmk.features.RecipeBundleFeature.FEATURED_ATTRIBUTES" title="cosmk.features.RecipeBundleFeature.FEATURED_ATTRIBUTES"><strong>FEATURED_ATTRIBUTES</strong></a> – the set of all the featured attributes provided
to the <code class="xref py py-data docutils literal notranslate"><span class="pre">Recipe</span></code> object by this recipe feature</li>
<li><a class="reference internal" href="#cosmk.features.RecipeBundleFeature.SCHEMA" title="cosmk.features.RecipeBundleFeature.SCHEMA"><strong>SCHEMA</strong></a> – the <code class="xref py py-data docutils literal notranslate"><span class="pre">dict</span></code> schema for the recipe configuration part
relative to the current feature</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is a metaclass and therefore must not be used or initialized
directly. Use a subclass of this metaclass.</p>
</div>
<dl class="attribute">
<dt id="cosmk.features.RecipeFeature.FEATURED_ATTRIBUTES">
<code class="descname">FEATURED_ATTRIBUTES</code><em class="property"> = set()</em><a class="headerlink" href="#cosmk.features.RecipeFeature.FEATURED_ATTRIBUTES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="cosmk.features.RecipeFeature.NAME">
<code class="descname">NAME</code><em class="property"> = '&lt;meta-feature&gt;'</em><a class="headerlink" href="#cosmk.features.RecipeFeature.NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="cosmk.features.RecipeFeature.SCHEMA">
<code class="descname">SCHEMA</code><em class="property"> = Schema({})</em><a class="headerlink" href="#cosmk.features.RecipeFeature.SCHEMA" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cosmk.features.RecipeFeature.replace_placeholders">
<code class="descname">replace_placeholders</code><span class="sig-paren">(</span><em>s</em>, <em>sdk_context=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/features.html#RecipeFeature.replace_placeholders"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.features.RecipeFeature.replace_placeholders" title="Permalink to this definition">¶</a></dt>
<dd><p>Replace the placeholders of a given string <cite>s</cite> and return a
copy of this string.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cosmk.features.RecipeRootFeature">
<em class="property">class </em><code class="descclassname">cosmk.features.</code><code class="descname">RecipeRootFeature</code><span class="sig-paren">(</span><em>recipe</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/features.html#RecipeRootFeature"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.features.RecipeRootFeature" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cosmk.features.RecipeFeature" title="cosmk.features.RecipeFeature"><code class="xref py py-class docutils literal notranslate"><span class="pre">cosmk.features.RecipeFeature</span></code></a></p>
<p>Recipe feature for building rootfs from sources and binary packages</p>
<dl class="attribute">
<dt id="cosmk.features.RecipeRootFeature.FEATURED_ATTRIBUTES">
<code class="descname">FEATURED_ATTRIBUTES</code><em class="property"> = {'build', 'image'}</em><a class="headerlink" href="#cosmk.features.RecipeRootFeature.FEATURED_ATTRIBUTES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="cosmk.features.RecipeRootFeature.NAME">
<code class="descname">NAME</code><em class="property"> = 'root'</em><a class="headerlink" href="#cosmk.features.RecipeRootFeature.NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="cosmk.features.RecipeRootFeature.SCHEMA">
<code class="descname">SCHEMA</code><em class="property"> = Schema({'root': {'sdk': Regex('^[^\\s/]+/[^\\s/]+$'), Optional('env'): {Regex('^[a-zA-Z\\_][a-zA-Z0-9\\_]*$'): &lt;class 'str'&gt;}, 'build_steps': [&lt;class 'str'&gt;], 'image_steps': And([&lt;class 'str'&gt;], &lt;built-in function len&gt;)}, &lt;class 'str'&gt;: &lt;class 'object'&gt;})</em><a class="headerlink" href="#cosmk.features.RecipeRootFeature.SCHEMA" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cosmk.features.RecipeRootFeature.build">
<code class="descname">build</code><span class="sig-paren">(</span><em>clear_cache=False</em>, <em>clear_previous_build=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/features.html#RecipeRootFeature.build"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.features.RecipeRootFeature.build" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a root tree for this recipe from sources and binary packages
cache.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>clear_cache</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – whether or not the cache has to clear before
processing root build</li>
<li><strong>clear_previous_build</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – whether or not the previous root build
result has to be cleared</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cosmk.features.RecipeRootFeature.image">
<code class="descname">image</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/features.html#RecipeRootFeature.image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.features.RecipeRootFeature.image" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a root tree for this recipe only from binary packages cache
and without any build-time dependency.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cosmk.features.RecipeSdkFeature">
<em class="property">class </em><code class="descclassname">cosmk.features.</code><code class="descname">RecipeSdkFeature</code><span class="sig-paren">(</span><em>recipe</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/features.html#RecipeSdkFeature"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.features.RecipeSdkFeature" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cosmk.features.RecipeFeature" title="cosmk.features.RecipeFeature"><code class="xref py py-class docutils literal notranslate"><span class="pre">cosmk.features.RecipeFeature</span></code></a></p>
<p>Recipe feature for creating and proposing SDK objects to other
features.</p>
<dl class="attribute">
<dt id="cosmk.features.RecipeSdkFeature.FEATURED_ATTRIBUTES">
<code class="descname">FEATURED_ATTRIBUTES</code><em class="property"> = {'bootstrap', 'sdk', 'run'}</em><a class="headerlink" href="#cosmk.features.RecipeSdkFeature.FEATURED_ATTRIBUTES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="cosmk.features.RecipeSdkFeature.NAME">
<code class="descname">NAME</code><em class="property"> = 'sdk'</em><a class="headerlink" href="#cosmk.features.RecipeSdkFeature.NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="cosmk.features.RecipeSdkFeature.SCHEMA">
<code class="descname">SCHEMA</code><em class="property"> = Schema({'runtime': {'additional_capabilities': [&lt;class 'str'&gt;], 'additional_device_bindings': [&lt;class 'str'&gt;], 'cwd': And(&lt;class 'str'&gt;, &lt;built-in function len&gt;), 'prelude_commands': [&lt;class 'str'&gt;], 'postlude_commands': [&lt;class 'str'&gt;], Optional('env'): {Regex('^[a-zA-Z\\_][a-zA-Z0-9\\_]*$'): &lt;class 'str'&gt;}, 'writable_assets_dirs_at_build': [And(&lt;class 'str'&gt;, &lt;built-in function len&gt;)]}, 'bootstrap': {'rootfs_archive': &lt;class 'str'&gt;, Optional('env'): {Regex('^[a-zA-Z\\_][a-zA-Z0-9\\_]*$'): &lt;class 'str'&gt;}, 'steps': [&lt;class 'str'&gt;]}, 'run': {Optional('env'): {Regex('^[a-zA-Z\\_][a-zA-Z0-9\\_]*$'): &lt;class 'str'&gt;}, 'steps': And([&lt;class 'str'&gt;], &lt;built-in function len&gt;)}, &lt;class 'str'&gt;: &lt;class 'object'&gt;})</em><a class="headerlink" href="#cosmk.features.RecipeSdkFeature.SCHEMA" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cosmk.features.RecipeSdkFeature.bootstrap">
<code class="descname">bootstrap</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/features.html#RecipeSdkFeature.bootstrap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.features.RecipeSdkFeature.bootstrap" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cosmk.features.RecipeSdkFeature.run">
<code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/features.html#RecipeSdkFeature.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.features.RecipeSdkFeature.run" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="cosmk.features.RecipeSdkFeature.sdk">
<code class="descname">sdk</code><a class="headerlink" href="#cosmk.features.RecipeSdkFeature.sdk" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#cosmk.sdk.Sdk" title="cosmk.sdk.Sdk"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sdk</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cosmk.features.RecipeSignatureFeature">
<em class="property">class </em><code class="descclassname">cosmk.features.</code><code class="descname">RecipeSignatureFeature</code><span class="sig-paren">(</span><em>recipe</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/features.html#RecipeSignatureFeature"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.features.RecipeSignatureFeature" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cosmk.features.RecipeFeature" title="cosmk.features.RecipeFeature"><code class="xref py py-class docutils literal notranslate"><span class="pre">cosmk.features.RecipeFeature</span></code></a></p>
<p>Recipe feature for XXX</p>
<dl class="attribute">
<dt id="cosmk.features.RecipeSignatureFeature.NAME">
<code class="descname">NAME</code><em class="property"> = 'sign'</em><a class="headerlink" href="#cosmk.features.RecipeSignatureFeature.NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="cosmk.features.RecipeVirtualizedEnvironmentFeature">
<em class="property">class </em><code class="descclassname">cosmk.features.</code><code class="descname">RecipeVirtualizedEnvironmentFeature</code><span class="sig-paren">(</span><em>recipe</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/features.html#RecipeVirtualizedEnvironmentFeature"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.features.RecipeVirtualizedEnvironmentFeature" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cosmk.features.RecipeFeature" title="cosmk.features.RecipeFeature"><code class="xref py py-class docutils literal notranslate"><span class="pre">cosmk.features.RecipeFeature</span></code></a></p>
<p>Recipe feature for creating, running and cleaning virtualized
environment created from other recipe feature results.</p>
<dl class="attribute">
<dt id="cosmk.features.RecipeVirtualizedEnvironmentFeature.FEATURED_ATTRIBUTES">
<code class="descname">FEATURED_ATTRIBUTES</code><em class="property"> = {'spawn', 'create', 'destroy'}</em><a class="headerlink" href="#cosmk.features.RecipeVirtualizedEnvironmentFeature.FEATURED_ATTRIBUTES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="cosmk.features.RecipeVirtualizedEnvironmentFeature.NAME">
<code class="descname">NAME</code><em class="property"> = 'virt'</em><a class="headerlink" href="#cosmk.features.RecipeVirtualizedEnvironmentFeature.NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="cosmk.features.RecipeVirtualizedEnvironmentFeature.SCHEMA">
<code class="descname">SCHEMA</code><em class="property"> = Schema({'virt': {'xml_domain_template': And(&lt;class 'str'&gt;, &lt;built-in function len&gt;), 'xml_network_template': And(&lt;class 'str'&gt;, &lt;built-in function len&gt;), 'ovmf_code': And(&lt;class 'str'&gt;, &lt;built-in function len&gt;), 'ovmf_vars_template': And(&lt;class 'str'&gt;, &lt;built-in function len&gt;), 'qcow2_main_disk_image': And(&lt;class 'str'&gt;, &lt;built-in function len&gt;)}, &lt;class 'str'&gt;: &lt;class 'object'&gt;})</em><a class="headerlink" href="#cosmk.features.RecipeVirtualizedEnvironmentFeature.SCHEMA" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cosmk.features.RecipeVirtualizedEnvironmentFeature.create">
<code class="descname">create</code><span class="sig-paren">(</span><em>destroy_preexisting=False</em>, <em>spawn_virt_manager_console=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/features.html#RecipeVirtualizedEnvironmentFeature.create"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.features.RecipeVirtualizedEnvironmentFeature.create" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cosmk.features.RecipeVirtualizedEnvironmentFeature.destroy">
<code class="descname">destroy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/features.html#RecipeVirtualizedEnvironmentFeature.destroy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.features.RecipeVirtualizedEnvironmentFeature.destroy" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cosmk.features.RecipeVirtualizedEnvironmentFeature.spawn">
<code class="descname">spawn</code><span class="sig-paren">(</span><em>destroy_preexisting=False</em>, <em>spawn_virt_manager_console=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/features.html#RecipeVirtualizedEnvironmentFeature.spawn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.features.RecipeVirtualizedEnvironmentFeature.spawn" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="cosmk.features.RecipeVirtualizedEnvironmentFeature.virtualized_environment">
<code class="descname">virtualized_environment</code><a class="headerlink" href="#cosmk.features.RecipeVirtualizedEnvironmentFeature.virtualized_environment" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#cosmk.virt.VirtualizedEnvironment" title="cosmk.virt.VirtualizedEnvironment"><code class="xref py py-class docutils literal notranslate"><span class="pre">VirtualizedEnvironment</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-cosmk.fs">
<span id="cosmk-fs-module"></span><h2><code class="docutils literal notranslate"><span class="pre">cosmk.fs</span></code> module<a class="headerlink" href="#module-cosmk.fs" title="Permalink to this headline">¶</a></h2>
<p>Module providing filesystem-related utility functions and classes.</p>
<p>The host system must provide some command line utilities such as <code class="docutils literal notranslate"><span class="pre">losetup(8)</span></code>
or <code class="docutils literal notranslate"><span class="pre">mksquashfs</span></code>.</p>
<dl class="class">
<dt id="cosmk.fs.LoopDevice">
<em class="property">class </em><code class="descclassname">cosmk.fs.</code><code class="descname">LoopDevice</code><span class="sig-paren">(</span><em>backfile</em>, <em>device=None</em>, <em>readonly=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/fs.html#LoopDevice"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.fs.LoopDevice" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Simple loop device object abstraction that can be used as a context
manager.</p>
</dd></dl>

<dl class="class">
<dt id="cosmk.fs.OverlayfsMount">
<em class="property">class </em><code class="descclassname">cosmk.fs.</code><code class="descname">OverlayfsMount</code><span class="sig-paren">(</span><em>mergeddir</em>, <em>lowerdir</em>, <em>upperdir=None</em>, <em>workdir=None</em>, <em>options=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/fs.html#OverlayfsMount"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.fs.OverlayfsMount" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Simple overlayfs mountpoint object abstraction that can be used as a
context manager to mount an overlayfs onto a given mountpoint.</p>
</dd></dl>

<dl class="class">
<dt id="cosmk.fs.SquashfsMount">
<em class="property">class </em><code class="descclassname">cosmk.fs.</code><code class="descname">SquashfsMount</code><span class="sig-paren">(</span><em>squashfile</em>, <em>mountpoint</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/fs.html#SquashfsMount"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.fs.SquashfsMount" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Simple squashfs mountpoint object abstraction that can be used as a
context manager to mount squashfs files onto a given mountpoint.</p>
</dd></dl>

<dl class="class">
<dt id="cosmk.fs.TmpfsMount">
<em class="property">class </em><code class="descclassname">cosmk.fs.</code><code class="descname">TmpfsMount</code><span class="sig-paren">(</span><em>mountpoint</em>, <em>**options</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/fs.html#TmpfsMount"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.fs.TmpfsMount" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Simple tmpfs mountpoint object abstraction that can be used as a
context manager to mount a tmpfs mountpoint.</p>
</dd></dl>

<dl class="function">
<dt id="cosmk.fs.close_loop">
<code class="descclassname">cosmk.fs.</code><code class="descname">close_loop</code><span class="sig-paren">(</span><em>device</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/fs.html#close_loop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.fs.close_loop" title="Permalink to this definition">¶</a></dt>
<dd><p>Close a loopback device node.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cosmk.fs.loop_devices">
<code class="descclassname">cosmk.fs.</code><code class="descname">loop_devices</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/fs.html#loop_devices"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.fs.loop_devices" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the loop devices currently set up on the system.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference internal" href="#cosmk.fs.LoopDevice" title="cosmk.fs.LoopDevice"><code class="xref py py-class docutils literal notranslate"><span class="pre">LoopDevice</span></code></a>]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cosmk.fs.mksquashfs">
<code class="descclassname">cosmk.fs.</code><code class="descname">mksquashfs</code><span class="sig-paren">(</span><em>squashfs_file</em>, <em>source_dir</em>, <em>compressor='gzip'</em>, <em>store_xattrs=True</em>, <em>detect_sparse_files=True</em>, <em>compress_inode_table=False</em>, <em>compress_data_blocks=False</em>, <em>compress_fragment_blocks=False</em>, <em>compress_extended_attributes=False</em>, <em>find_duplicates=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/fs.html#mksquashfs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.fs.mksquashfs" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper around the command mksquashfs</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>squashfs_file</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – the path to the squashfs file to produce</li>
<li><strong>source_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – the directory to compress into a squashfs</li>
<li><strong>compressor</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – the compression method to use</li>
<li><strong>store_xattrs</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – whether to save extended attributes or not</li>
<li><strong>detect_sparse_files</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – activate sparse file detection (recommended)</li>
<li><strong>compress_inode_table</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – compress the inode table</li>
<li><strong>compress_data_blocks</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – compress data blocks</li>
<li><strong>compress_fragment_blocks</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – compress fragment blocks</li>
<li><strong>compress_extended_attributes</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – compress extended attributes</li>
<li><strong>find_duplicates</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – perform duplicate checking</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cosmk.fs.open_loop">
<code class="descclassname">cosmk.fs.</code><code class="descname">open_loop</code><span class="sig-paren">(</span><em>backfile</em>, <em>device=None</em>, <em>readonly=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/fs.html#open_loop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.fs.open_loop" title="Permalink to this definition">¶</a></dt>
<dd><p>Open a loopback device given a back-file and eventually the device node
to use.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-cosmk.healthcheck">
<span id="cosmk-healthcheck-module"></span><h2><code class="docutils literal notranslate"><span class="pre">cosmk.healthcheck</span></code> module<a class="headerlink" href="#module-cosmk.healthcheck" title="Permalink to this headline">¶</a></h2>
<p>CLIP OS toolkit healthcheck functions and stuff</p>
<dl class="function">
<dt id="cosmk.healthcheck.check_system">
<code class="descclassname">cosmk.healthcheck.</code><code class="descname">check_system</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/healthcheck.html#check_system"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.healthcheck.check_system" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cosmk.healthcheck.healthcheck">
<code class="descclassname">cosmk.healthcheck.</code><code class="descname">healthcheck</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/healthcheck.html#healthcheck"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.healthcheck.healthcheck" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify that the current system has everything to make work properly
cosmk. This verifies that the Linux kernel version and the available
features are , the availability of the required system utilities, the filesystem
options of the repo root underlying mountpoint, the available free space on
this mountpoint, etc.</p>
<p>TODO: extend this list :)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-cosmk.instrumentation">
<span id="cosmk-instrumentation-module"></span><h2><code class="docutils literal notranslate"><span class="pre">cosmk.instrumentation</span></code> module<a class="headerlink" href="#module-cosmk.instrumentation" title="Permalink to this headline">¶</a></h2>
<p>Module handling recipe instrumentation logic.</p>
<dl class="class">
<dt id="cosmk.instrumentation.InstrumentationLevel">
<em class="property">class </em><code class="descclassname">cosmk.instrumentation.</code><code class="descname">InstrumentationLevel</code><a class="reference internal" href="../_modules/cosmk/instrumentation.html#InstrumentationLevel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.instrumentation.InstrumentationLevel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/enum.html#enum.Enum" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code></a></p>
<p>Instrumentation level enumeration for the recipes</p>
<dl class="attribute">
<dt id="cosmk.instrumentation.InstrumentationLevel.DEBUG">
<code class="descname">DEBUG</code><em class="property"> = 2</em><a class="headerlink" href="#cosmk.instrumentation.InstrumentationLevel.DEBUG" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="cosmk.instrumentation.InstrumentationLevel.DEVELOPMENT">
<code class="descname">DEVELOPMENT</code><em class="property"> = 1</em><a class="headerlink" href="#cosmk.instrumentation.InstrumentationLevel.DEVELOPMENT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="cosmk.instrumentation.InstrumentationLevel.PRODUCTION">
<code class="descname">PRODUCTION</code><em class="property"> = 0</em><a class="headerlink" href="#cosmk.instrumentation.InstrumentationLevel.PRODUCTION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="cosmk.instrumentation.instrumented_recipes">
<code class="descclassname">cosmk.instrumentation.</code><code class="descname">instrumented_recipes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/instrumentation.html#instrumented_recipes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.instrumentation.instrumented_recipes" title="Permalink to this definition">¶</a></dt>
<dd><p>Probes for existence of an “instrumentation.toml” drop-in file at the
root of the <cite>repo</cite> source tree, parses this file and return a
<code class="xref py py-data docutils literal notranslate"><span class="pre">dict</span></code> of all the recipe identifiers (as keys) requested to be
instrumented with their instrumentation level as value.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><a class="reference internal" href="#cosmk.exceptions.InstrumentationSpecificationError" title="cosmk.exceptions.InstrumentationSpecificationError"><strong>InstrumentationSpecificationError</strong></a> – in case of an incoherence in the
<code class="docutils literal notranslate"><span class="pre">instrumentation.toml</span></code> file</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference internal" href="#cosmk.instrumentation.InstrumentationLevel" title="cosmk.instrumentation.InstrumentationLevel"><code class="xref py py-class docutils literal notranslate"><span class="pre">InstrumentationLevel</span></code></a>]</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-cosmk.log">
<span id="cosmk-log-module"></span><h2><code class="docutils literal notranslate"><span class="pre">cosmk.log</span></code> module<a class="headerlink" href="#module-cosmk.log" title="Permalink to this headline">¶</a></h2>
<p>Logging utility functions and helpers.</p>
<dl class="function">
<dt id="cosmk.log.critical">
<code class="descclassname">cosmk.log.</code><code class="descname">critical</code><span class="sig-paren">(</span><em>msg</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/log.html#critical"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.log.critical" title="Permalink to this definition">¶</a></dt>
<dd><p>Log a message as <code class="xref py py-data docutils literal notranslate"><span class="pre">logging.CRITICAL</span></code> level.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>msg</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – the message to log</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cosmk.log.debug">
<code class="descclassname">cosmk.log.</code><code class="descname">debug</code><span class="sig-paren">(</span><em>msg</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/log.html#debug"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.log.debug" title="Permalink to this definition">¶</a></dt>
<dd><p>Log a message as <code class="xref py py-data docutils literal notranslate"><span class="pre">logging.DEBUG</span></code> level.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>msg</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – the message to log</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cosmk.log.error">
<code class="descclassname">cosmk.log.</code><code class="descname">error</code><span class="sig-paren">(</span><em>msg</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/log.html#error"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.log.error" title="Permalink to this definition">¶</a></dt>
<dd><p>Log a message as <code class="xref py py-data docutils literal notranslate"><span class="pre">logging.ERROR</span></code> level.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>msg</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – the message to log</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cosmk.log.info">
<code class="descclassname">cosmk.log.</code><code class="descname">info</code><span class="sig-paren">(</span><em>msg</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/log.html#info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.log.info" title="Permalink to this definition">¶</a></dt>
<dd><p>Log a message as <code class="xref py py-data docutils literal notranslate"><span class="pre">logging.INFO</span></code> level.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>msg</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – the message to log</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cosmk.log.warn">
<code class="descclassname">cosmk.log.</code><code class="descname">warn</code><span class="sig-paren">(</span><em>msg</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/log.html#warn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.log.warn" title="Permalink to this definition">¶</a></dt>
<dd><p>Log a message as <code class="xref py py-data docutils literal notranslate"><span class="pre">logging.WARNING</span></code> level.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>msg</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – the message to log</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-cosmk.mount">
<span id="cosmk-mount-module"></span><h2><code class="docutils literal notranslate"><span class="pre">cosmk.mount</span></code> module<a class="headerlink" href="#module-cosmk.mount" title="Permalink to this headline">¶</a></h2>
<p>Module providing mount point management objects.</p>
<p>The host system must provide a <code class="docutils literal notranslate"><span class="pre">mount(8)</span></code> and <code class="docutils literal notranslate"><span class="pre">umount(8)</span></code> command line
utilities available through PATH.</p>
<dl class="class">
<dt id="cosmk.mount.Mountpoint">
<em class="property">class </em><code class="descclassname">cosmk.mount.</code><code class="descname">Mountpoint</code><span class="sig-paren">(</span><em>source</em>, <em>target</em>, <em>type=None</em>, <em>options=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/mount.html#Mountpoint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.mount.Mountpoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Mountpoint object that can be used as a context manager for
contextualized mounts.</p>
</dd></dl>

<dl class="function">
<dt id="cosmk.mount.mount">
<code class="descclassname">cosmk.mount.</code><code class="descname">mount</code><span class="sig-paren">(</span><em>source</em>, <em>target</em>, <em>type=None</em>, <em>options=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/mount.html#mount"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.mount.mount" title="Permalink to this definition">¶</a></dt>
<dd><p>Mount function with usage reflecting the traditional UNIX <code class="docutils literal notranslate"><span class="pre">mount(8)</span></code>
command line utility.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><a class="reference internal" href="#cosmk.exceptions.SystemCommandError" title="cosmk.exceptions.SystemCommandError"><strong>SystemCommandError</strong></a> – in case of failure of the <code class="docutils literal notranslate"><span class="pre">mount</span></code> call (reason inside the exception)</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cosmk.mount.mounts">
<code class="descclassname">cosmk.mount.</code><code class="descname">mounts</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/mount.html#mounts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.mount.mounts" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the list of the mount points in the current mnt namespace. In
other words, it basically wraps the contents of the pseudo-file
<code class="docutils literal notranslate"><span class="pre">/proc/mounts</span></code> into an easily manipulable Python object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference internal" href="#cosmk.mount.Mountpoint" title="cosmk.mount.Mountpoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mountpoint</span></code></a>]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cosmk.mount.umount">
<code class="descclassname">cosmk.mount.</code><code class="descname">umount</code><span class="sig-paren">(</span><em>target</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/mount.html#umount"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.mount.umount" title="Permalink to this definition">¶</a></dt>
<dd><p>Unmount function with usage reflecting the traditional UNIX
<code class="docutils literal notranslate"><span class="pre">umount(8)</span></code> command line utility.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>target</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – the mountpoint to unmount</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><a class="reference internal" href="#cosmk.exceptions.SystemCommandError" title="cosmk.exceptions.SystemCommandError"><strong>SystemCommandError</strong></a> – in case of failure of the <code class="docutils literal notranslate"><span class="pre">umount</span></code> call (reason inside the exception)</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-cosmk.privileges">
<span id="cosmk-privileges-module"></span><h2><code class="docutils literal notranslate"><span class="pre">cosmk.privileges</span></code> module<a class="headerlink" href="#module-cosmk.privileges" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="cosmk.privileges.ElevatedPrivileges">
<em class="property">class </em><code class="descclassname">cosmk.privileges.</code><code class="descname">ElevatedPrivileges</code><a class="reference internal" href="../_modules/cosmk/privileges.html#ElevatedPrivileges"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.privileges.ElevatedPrivileges" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Context manager class to be used to elevate privileges locally within
Python code of this cosmk module.</p>
<dl class="staticmethod">
<dt id="cosmk.privileges.ElevatedPrivileges.possible">
<em class="property">static </em><code class="descname">possible</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/privileges.html#ElevatedPrivileges.possible"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.privileges.ElevatedPrivileges.possible" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates if the privileges elevation is possible by doing a
RES{U,G}ID flip over.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="cosmk.privileges.init_lower_privileges">
<code class="descclassname">cosmk.privileges.</code><code class="descname">init_lower_privileges</code><span class="sig-paren">(</span><em>uid</em>, <em>gid</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/privileges.html#init_lower_privileges"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.privileges.init_lower_privileges" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to lower privileges (<em>i.e.</em> change <em>real</em> and <em>effective</em> UIDs
and GIDs to UID/GID values given as arguments) intended to be called at
cosmk module importation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-cosmk.product">
<span id="cosmk-product-module"></span><h2><code class="docutils literal notranslate"><span class="pre">cosmk.product</span></code> module<a class="headerlink" href="#module-cosmk.product" title="Permalink to this headline">¶</a></h2>
<p>Module for products manageable with cosmk</p>
<dl class="class">
<dt id="cosmk.product.Product">
<em class="property">class </em><code class="descclassname">cosmk.product.</code><code class="descname">Product</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/product.html#Product"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.product.Product" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Class describing a CLIP OS (or one of its derivative) product.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – the name of the product (<em>e.g.</em> <code class="docutils literal notranslate"><span class="pre">clipos</span></code>)</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="cosmk.product.Product.SCHEMA">
<code class="descname">SCHEMA</code><em class="property"> = Schema({'version': And(&lt;class 'str'&gt;, &lt;built-in function len&gt;, &lt;function parse&gt;), &lt;class 'str'&gt;: &lt;class 'object'&gt;})</em><a class="headerlink" href="#cosmk.product.Product.SCHEMA" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="cosmk.product.Product.tainted_version">
<code class="descname">tainted_version</code><a class="headerlink" href="#cosmk.product.Product.tainted_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the version of this product as defined in its “properties.toml”
file but “tainted” with a build flag <code class="docutils literal notranslate"><span class="pre">instrumentation</span></code> if an
“instrumentation.toml” file is present at the root of the repo source
tree.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cosmk.product.Product.validate_properties">
<code class="descname">validate_properties</code><span class="sig-paren">(</span><em>prop_dict</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/product.html#Product.validate_properties"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.product.Product.validate_properties" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate the data structure of the product properties file
(“properties.toml”) and reorganize them into a “flattened”
<code class="xref py py-data docutils literal notranslate"><span class="pre">dict</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>prop_dict</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>]) – the properties dict object to validate against the
schema (<a class="reference internal" href="#cosmk.product.Product.SCHEMA" title="cosmk.product.Product.SCHEMA"><code class="xref py py-data docutils literal notranslate"><span class="pre">SCHEMA</span></code></a>)</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><a class="reference internal" href="#cosmk.exceptions.ProductPropertiesError" title="cosmk.exceptions.ProductPropertiesError"><strong>ProductPropertiesError</strong></a> – in case of bad data structure</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="cosmk.product.Product.version">
<code class="descname">version</code><a class="headerlink" href="#cosmk.product.Product.version" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the version of this product as defined in its “properties.toml”
file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-cosmk.recipe">
<span id="cosmk-recipe-module"></span><h2><code class="docutils literal notranslate"><span class="pre">cosmk.recipe</span></code> module<a class="headerlink" href="#module-cosmk.recipe" title="Permalink to this headline">¶</a></h2>
<p>The CLIP OS and derivatives recipe abstraction</p>
<dl class="class">
<dt id="cosmk.recipe.Recipe">
<em class="property">class </em><code class="descclassname">cosmk.recipe.</code><code class="descname">Recipe</code><span class="sig-paren">(</span><em>identifier</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/recipe.html#Recipe"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.recipe.Recipe" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>A CLIP OS toolkit recipe.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>identifier</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – the identifier of the recipe (<em>e.g.</em> <code class="docutils literal notranslate"><span class="pre">clipos/core</span></code>)</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="cosmk.recipe.Recipe.cache_subpath">
<code class="descname">cache_subpath</code><a class="headerlink" href="#cosmk.recipe.Recipe.cache_subpath" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the cache directory sub-path within the repo root.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="cosmk.recipe.Recipe.meta_schema">
<code class="descname">meta_schema</code><a class="headerlink" href="#cosmk.recipe.Recipe.meta_schema" title="Permalink to this definition">¶</a></dt>
<dd><p>The schema for which the recipe configuration file (<code class="docutils literal notranslate"><span class="pre">recipe.toml</span></code>)
needs to comply for common part (<em>i.e.</em> the part of the configuration
common to all the recipes)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="xref py py-class docutils literal notranslate"><span class="pre">Schema</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="cosmk.recipe.Recipe.out_subpath">
<code class="descname">out_subpath</code><a class="headerlink" href="#cosmk.recipe.Recipe.out_subpath" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the output directory sub-path within the repo root.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cosmk.recipe.Recipe.validate_metaconfig">
<code class="descname">validate_metaconfig</code><span class="sig-paren">(</span><em>config</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/recipe.html#Recipe.validate_metaconfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.recipe.Recipe.validate_metaconfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate the data structure of the recipe configuration file
(“recipe.toml”) which do not concern any feature implementation (<em>i.e.</em>
the “meta” part of the recipe configuration).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>config</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>]) – the configuration dict object to validate against the
recipe meta schema</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><a class="reference internal" href="#cosmk.exceptions.RecipeConfigurationError" title="cosmk.exceptions.RecipeConfigurationError"><strong>RecipeConfigurationError</strong></a> – in case of bad data structure</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>]</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-cosmk.sourcetree">
<span id="cosmk-sourcetree-module"></span><h2><code class="docutils literal notranslate"><span class="pre">cosmk.sourcetree</span></code> module<a class="headerlink" href="#module-cosmk.sourcetree" title="Permalink to this headline">¶</a></h2>
<p>This module provide all the logic, functions and classes to manage the CLIP
OS source tree.
In a greater extent, this CLIP OS source tree is also managed by the <code class="docutils literal notranslate"><span class="pre">repo</span></code>
tool but this module provide enhanced functionalities to those provided only by
<code class="docutils literal notranslate"><span class="pre">repo</span></code>.</p>
<dl class="class">
<dt id="cosmk.sourcetree.CommentedTreeBuilder">
<em class="property">class </em><code class="descclassname">cosmk.sourcetree.</code><code class="descname">CommentedTreeBuilder</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/sourcetree.html#CommentedTreeBuilder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.sourcetree.CommentedTreeBuilder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.TreeBuilder" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">xml.etree.ElementTree.TreeBuilder</span></code></a></p>
<p>An <code class="xref py py-mod docutils literal notranslate"><span class="pre">xml.etree.ElementTree.TreeBuilder</span></code> subclass that retains XML
comments.</p>
<dl class="method">
<dt id="cosmk.sourcetree.CommentedTreeBuilder.comment">
<code class="descname">comment</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/sourcetree.html#CommentedTreeBuilder.comment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.sourcetree.CommentedTreeBuilder.comment" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="cosmk.sourcetree.fix_output_nodes_ownerships">
<code class="descclassname">cosmk.sourcetree.</code><code class="descname">fix_output_nodes_ownerships</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/sourcetree.html#fix_output_nodes_ownerships"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.sourcetree.fix_output_nodes_ownerships" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cosmk.sourcetree.is_repo_root">
<code class="descclassname">cosmk.sourcetree.</code><code class="descname">is_repo_root</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/sourcetree.html#is_repo_root"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.sourcetree.is_repo_root" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if the given path contains a “.repo” directory.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cosmk.sourcetree.repo_root_path">
<code class="descclassname">cosmk.sourcetree.</code><code class="descname">repo_root_path</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/sourcetree.html#repo_root_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.sourcetree.repo_root_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Guess the repo root directory path from the current working directory or
(if the CWD does not seem to be a repo root) from the location of the
cosmk module.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cosmk.sourcetree.snapshot_manifest">
<code class="descclassname">cosmk.sourcetree.</code><code class="descname">snapshot_manifest</code><span class="sig-paren">(</span><em>use_branches=False</em>, <em>snapshot_groups=None</em>, <em>no_snapshot_groups=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/sourcetree.html#snapshot_manifest"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.sourcetree.snapshot_manifest" title="Permalink to this definition">¶</a></dt>
<dd><p>Snapshot the <code class="docutils literal notranslate"><span class="pre">repo</span></code> manifest file to the current state of the CLIP OS
source tree.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-cosmk.sdk">
<span id="cosmk-sdk-module"></span><h2><code class="docutils literal notranslate"><span class="pre">cosmk.sdk</span></code> module<a class="headerlink" href="#module-cosmk.sdk" title="Permalink to this headline">¶</a></h2>
<p>CLIP OS toolkit SDK class</p>
<dl class="class">
<dt id="cosmk.sdk.Sdk">
<em class="property">class </em><code class="descclassname">cosmk.sdk.</code><code class="descname">Sdk</code><span class="sig-paren">(</span><em>recipe</em>, <em>cwd='/'</em>, <em>env=None</em>, <em>additional_capabilities=None</em>, <em>additional_device_bindings=None</em>, <em>prelude_commands=None</em>, <em>postlude_commands=None</em>, <em>writable_assets_dirs_at_build=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/sdk.html#Sdk"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.sdk.Sdk" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>A CLIP OS toolkit SDK</p>
<dl class="method">
<dt id="cosmk.sdk.Sdk.bootstrap">
<code class="descname">bootstrap</code><span class="sig-paren">(</span><em>rootfs_archive</em>, <em>steps=None</em>, <em>env=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/sdk.html#Sdk.bootstrap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.sdk.Sdk.bootstrap" title="Permalink to this definition">¶</a></dt>
<dd><p>Bootstrap a SDK from the rootfs archive file specified in the recipe
configuration file with the suitable script in order to produce a
squashfs image that can be run as a container with the <code class="docutils literal notranslate"><span class="pre">Container</span></code>
class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cosmk.sdk.Sdk.container_mountpoints">
<code class="descname">container_mountpoints</code><span class="sig-paren">(</span><em>action_name</em>, <em>action_targeted_recipe</em>, <em>writable_repo_root=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/sdk.html#Sdk.container_mountpoints"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.sdk.Sdk.container_mountpoints" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the list of <code class="docutils literal notranslate"><span class="pre">ContainerMountpoint</span></code>’s corresponding to the
mountpoints of the SDK context.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference internal" href="#cosmk.container.ContainerMountpoint" title="cosmk.container.ContainerMountpoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContainerMountpoint</span></code></a>]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cosmk.sdk.Sdk.interactive_run">
<code class="descname">interactive_run</code><span class="sig-paren">(</span><em>steps</em>, <em>env=None</em>, <em>shared_host_netns=True</em>, <em>writable_repo_root=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/sdk.html#Sdk.interactive_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.sdk.Sdk.interactive_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a command interactively in this SDK</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cosmk.sdk.Sdk.session">
<code class="descname">session</code><span class="sig-paren">(</span><em>action_name</em>, <em>action_targeted_recipe</em>, <em>writable_repo_root=False</em>, <em>terminal=False</em>, <em>env=None</em>, <em>shared_host_netns=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/sdk.html#Sdk.session"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.sdk.Sdk.session" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an SDK session from this SDK recipe in order to be able to
spawn the appropriate container (<em>i.e.</em> for treating a given <cite>action</cite>
for a given <cite>recipe</cite> of the product <cite>product</cite>) and pass commands to it.</p>
<p>This context manager is in charge of creating the container (in the
sense of the <code class="docutils literal notranslate"><span class="pre">Container</span></code> class) for the living time span of the
context manager.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterator</span></code></a>[<a class="reference internal" href="#cosmk.sdk.SdkSession" title="cosmk.sdk.SdkSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">SdkSession</span></code></a>]</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cosmk.sdk.SdkSession">
<em class="property">class </em><code class="descclassname">cosmk.sdk.</code><code class="descname">SdkSession</code><span class="sig-paren">(</span><em>container_session</em>, <em>cwd</em>, <em>env</em>, <em>terminal=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/sdk.html#SdkSession"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.sdk.SdkSession" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Session of a SDK container.</p>
<dl class="method">
<dt id="cosmk.sdk.SdkSession.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>command</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/sdk.html#SdkSession.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.sdk.SdkSession.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a command in this SDK container session.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-cosmk.virt">
<span id="cosmk-virt-module"></span><h2><code class="docutils literal notranslate"><span class="pre">cosmk.virt</span></code> module<a class="headerlink" href="#module-cosmk.virt" title="Permalink to this headline">¶</a></h2>
<p>This module manages all the code logic relative to the creation and
management of the CLIP OS virtualized environments with <cite>libvirt</cite>.</p>
<dl class="class">
<dt id="cosmk.virt.VirtualizedEnvironment">
<em class="property">class </em><code class="descclassname">cosmk.virt.</code><code class="descname">VirtualizedEnvironment</code><span class="sig-paren">(</span><em>name</em>, <em>libvirt_domain_xml_template</em>, <em>libvirt_network_xml_template</em>, <em>qcow2_main_disk_image</em>, <em>ovmf_firmware_code</em>, <em>ovmf_firmware_vars_template</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/virt.html#VirtualizedEnvironment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.virt.VirtualizedEnvironment" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>A CLIP OS recipe virtualized environment.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – the name to give to the libvirt domain and network</li>
<li><strong>libvirt_domain_xml_template</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – the path to the XML template file to
use as the XML domain definition for the libvirt domain</li>
<li><strong>libvirt_network_xml_template</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – the path to the XML template file to
use as the XML network definition for the libvirt network</li>
<li><strong>qcow2_main_disk_image</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – the path to the main disk image (formatted
as QCOW2) to use for the libvirt domain to be created</li>
<li><strong>ovmf_firmware_code</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – the path to the OVMF firmware code to be
used by the libvirt domain</li>
<li><strong>ovmf_firmware_vars_template</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – the path to the OVMF firmware
UEFI vars template file to be used by the libvirt domain</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="cosmk.virt.VirtualizedEnvironment.RUNTIME_WORKING_DIR_REPO_SUBPATH">
<code class="descname">RUNTIME_WORKING_DIR_REPO_SUBPATH</code><em class="property"> = 'run/virtual_machines'</em><a class="headerlink" href="#cosmk.virt.VirtualizedEnvironment.RUNTIME_WORKING_DIR_REPO_SUBPATH" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cosmk.virt.VirtualizedEnvironment.create">
<code class="descname">create</code><span class="sig-paren">(</span><em>start=False</em>, <em>destroy_preexisting=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/virt.html#VirtualizedEnvironment.create"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.virt.VirtualizedEnvironment.create" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the virtualized environment in libvirt with its dedicated
working directory in the sub-path in repo (defined in
<a class="reference internal" href="#cosmk.virt.VirtualizedEnvironment.RUNTIME_WORKING_DIR_REPO_SUBPATH" title="cosmk.virt.VirtualizedEnvironment.RUNTIME_WORKING_DIR_REPO_SUBPATH"><code class="xref py py-data docutils literal notranslate"><span class="pre">RUNTIME_WORKING_DIR_REPO_SUBPATH</span></code></a>).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cosmk.virt.VirtualizedEnvironment.destroy">
<code class="descname">destroy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/virt.html#VirtualizedEnvironment.destroy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.virt.VirtualizedEnvironment.destroy" title="Permalink to this definition">¶</a></dt>
<dd><p>Destroy the virtualized environment in libvirt with its dedicated
working directory in the sub-path in repo (defined in
<a class="reference internal" href="#cosmk.virt.VirtualizedEnvironment.RUNTIME_WORKING_DIR_REPO_SUBPATH" title="cosmk.virt.VirtualizedEnvironment.RUNTIME_WORKING_DIR_REPO_SUBPATH"><code class="xref py py-data docutils literal notranslate"><span class="pre">RUNTIME_WORKING_DIR_REPO_SUBPATH</span></code></a>).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cosmk.virt.VirtualizedEnvironment.spawn_virt_manager_console">
<code class="descname">spawn_virt_manager_console</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/virt.html#VirtualizedEnvironment.spawn_virt_manager_console"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.virt.VirtualizedEnvironment.spawn_virt_manager_console" title="Permalink to this definition">¶</a></dt>
<dd><p>Spawn a virtual machine manager console for the virtual machine.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="cosmk.virt.guess_external_netiface_name">
<code class="descclassname">cosmk.virt.</code><code class="descname">guess_external_netiface_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/cosmk/virt.html#guess_external_netiface_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cosmk.virt.guess_external_netiface_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Tries to retrieve the name of the external network interface. To do so,
this function select the first returned network interface whose name
suggest to be an Ethernet or wireless interface (<code class="docutils literal notranslate"><span class="pre">en*</span></code>, <code class="docutils literal notranslate"><span class="pre">eth*</span></code> or
<code class="docutils literal notranslate"><span class="pre">wl*</span></code>) and which appears to be connected to a full-duplex medium.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><a class="reference internal" href="#cosmk.exceptions.VirtualizedEnvironmentError" title="cosmk.exceptions.VirtualizedEnvironmentError"><strong>VirtualizedEnvironmentError</strong></a> – if no external network inteface could
be guessed and no dummy value has been provided</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="derive.html" class="btn btn-neutral" title="How to derive this project" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, ANSSI. CLIP OS is a trademark of the French Republic. For more details, see the &#34;How to derive this project&#34; section. The contents of this documentation is available under the Open License version 2.0 as published by Etalab (French task force for Open Data).

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'5.0.0_alpha1',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>