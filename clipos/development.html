

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Development and debug &mdash; CLIP OS 5.0.0_beta3 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/colors.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Quick try guide" href="../toolkit/quick-try.html" />
    <link rel="prev" title="Roadmap" href="roadmap.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> CLIP OS
          

          
            
            <img src="../_static/clipos_logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                5.0 (Beta)
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">CLIP OS</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="security.html">Security objectives</a></li>
<li class="toctree-l1"><a class="reference internal" href="kernel.html">Kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="boot_integrity.html">Boot chain and integrity guarantees</a></li>
<li class="toctree-l1"><a class="reference internal" href="update.html">System updates</a></li>
<li class="toctree-l1"><a class="reference internal" href="roadmap.html">Roadmap</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Development and debug</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#effect-of-instrumentation-features">Effect of instrumentation features</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Development environment</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../toolkit/quick-try.html">Quick try guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../toolkit/setup.html">Environment setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../toolkit/build.html">Building</a></li>
<li class="toctree-l1"><a class="reference internal" href="../toolkit/test.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../toolkit/build-steps.html">Build steps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../toolkit/source-tree.html">Source tree organization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../toolkit/maintaining_portage_tree.html">Maintaining the Portage tree</a></li>
<li class="toctree-l1"><a class="reference internal" href="../toolkit/maintaining_sdk.html">Maintaining the SDK</a></li>
</ul>
<p class="caption"><span class="caption-text">Contributing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../toolkit/contribute.html">How to contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="../toolkit/derive.html">How to derive this project</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">CLIP OS</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Development and debug</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/clipos/development.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="development-and-debug">
<span id="development"></span><h1>Development and debug<a class="headerlink" href="#development-and-debug" title="Permalink to this headline">¶</a></h1>
<p>This section describes all changes and information specific to development and
debug that only applies to the CLIP OS product.</p>
<div class="section" id="effect-of-instrumentation-features">
<h2>Effect of instrumentation features<a class="headerlink" href="#effect-of-instrumentation-features" title="Permalink to this headline">¶</a></h2>
<p>This is a summary of all changes made to the project during build and
configuration steps for each instrumentation feature available for development
only. Instrumentation features must be configured before project builds in
<code class="docutils literal notranslate"><span class="pre">instrumentation.toml</span></code> which must be located in the project repo root
directory. See <code class="docutils literal notranslate"><span class="pre">toolkit/instrumentation.toml.example</span></code> to get good default
values for development.</p>
<ul>
<li><p class="first"><strong>instrumented-core:</strong> Install additional software development tools in the
Core, such as Bash, Vim, tmux, tree, strace, grep, ip, less, gdb, tcpdump,
etc. (This is a non-exhautive list, for the complete list please refer to
the <code class="docutils literal notranslate"><span class="pre">clipos-meta/clipos-core</span></code> ebuild)</p>
</li>
<li><p class="first"><strong>passwordless-root-login:</strong> Enable local and remote (SSH) root login
without password.</p>
<div class="warning admonition">
<p class="first admonition-title">Dependency</p>
<p class="last">To use this instrumentation feature, you must also enable
<strong>instrumented-core</strong>.</p>
</div>
</li>
<li><p class="first"><strong>allow-ssh-root-login:</strong> Configure SSH in order to allow a developer to
log in as root (account must be enabled with the appropriate
instrumentation feature) via SSH and without any password thanks to an
installed SSH key pair (an SSH key pair will be generated in the cache
directory at first usage of this instrumentation feature). This also makes
the openssh server accessible over the local network and not only restricted
to IPsec interface.</p>
<div class="warning admonition">
<p class="first admonition-title">Dependency</p>
<p class="last">To use this instrumentation feature, you must also enable
<strong>passwordless-root-login</strong> and <strong>instrumented-core</strong>.</p>
</div>
</li>
<li><p class="first"><strong>dev-friendly-bootloader:</strong> Configure the bootloader to provide handy
features to developer (i.e.  “Reboot into firmware”) and set a smaller
timeout before loading the default boot entry.</p>
</li>
<li><p class="first"><strong>instrumented-initramfs:</strong> Install additional software development tools in
the initramfs, such as strace, ltrace, less, grep, gdb, etc. (This is a
non-exhautive list, for the complete list please refer to the
<code class="docutils literal notranslate"><span class="pre">clipos-meta/clipos-efiboot</span></code> ebuild).</p>
</li>
<li><p class="first"><strong>soften-kernel-configuration:</strong> Lower Linux kernel security parameters at
runtime.</p>
</li>
<li><p class="first"><strong>initramfs-no-require-tpm:</strong> Do not require a TPM 2.0 for the LUKS disk
partition decryption.  Therefore, in case of missing TPM 2.0, LUKS passphrase
will be prompted on the active console (either tty or serial console ttyS0).</p>
</li>
<li><p class="first"><strong>initramfs-no-tpm-lockout:</strong> Do not lockout TPM (brute-force attack
protection) when interacting with the TPM 2.0 (check out the TPM
documentation for the “noDA” attribute and for “dictionary attack
protections”).</p>
</li>
<li><p class="first"><strong>debuggable-initramfs:</strong> Activate alterations to initramfs/efiboot packages
intended to ease their debugging (e.g. debugging symbols):</p>
</li>
<li><p class="first"><strong>breakpointed-initramfs:</strong> Enable dracut breakpoints with interactive shell
drop-outs.</p>
<div class="important admonition">
<p class="first admonition-title">Important note</p>
<p class="last">This feature requires multiple interactions on the console (or serial
console for the QEMU target) to make the boot sequence proceed to the
final pivot_root(2).</p>
</div>
<div class="warning admonition">
<p class="first admonition-title">Dependency</p>
<p class="last">To use this instrumentation feature, you must also enable
<strong>instrumented-initramfs</strong>.</p>
</div>
</li>
<li><p class="first"><strong>early-root-shell:</strong> Spawn a persistent root interactive shell on a serial
console or an tty very early in the boot up sequence (right after the
pivot_root(2) done by the initramfs) in order to ease systemd debugging
tasks. See <a class="reference external" href="https://freedesktop.org/wiki/Software/systemd/Debugging">systemd debugging</a> for more
information.</p>
<div class="warning admonition">
<p class="first admonition-title">Dependency</p>
<p class="last">To use this instrumentation feature, you must also enable
<strong>instrumented-core</strong>.</p>
</div>
</li>
<li><p class="first"><strong>debuggable-kernel:</strong> Activates features for debugging purposes in the
kernel (KALLSYMS, core dump production, etc.) with logging output sent on the
serial port (ttyS0) early on boot up sequence.</p>
</li>
<li><p class="first"><strong>verbose-systemd:</strong> Sets parameters on the kernel command line to make
systemd very verbose on the defined console output (ttyS0 serial port by
default):</p>
</li>
<li><p class="first"><strong>coredump-handler:</strong> Configure systemd in order to install the
systemd-coredump to allow kernel produce core dump files.</p>
<div class="warning admonition">
<p class="first admonition-title">Dependency</p>
<p class="last">To use this instrumentation feature, you must also enable
<strong>debuggable-kernel</strong>.</p>
</div>
</li>
<li><p class="first"><strong>test-update:</strong> In addition to the normal build, create everything required
to test updates. This creates a second build with the same content but a
higher version.</p>
</li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../toolkit/quick-try.html" class="btn btn-neutral float-right" title="Quick try guide" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="roadmap.html" class="btn btn-neutral float-left" title="Roadmap" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, ANSSI. CLIP OS is a trademark of the French Republic. For more details, see the &#34;How to derive this project&#34; section. The contents of this documentation is available under the Open License version 2.0 as published by Etalab (French task force for Open Data)

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>